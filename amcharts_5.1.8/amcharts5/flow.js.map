{"version":3,"sources":["webpack://@amcharts/amcharts5/./src/.internal/charts/flow/FlowDefaultTheme.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/Flow.ts","webpack://@amcharts/amcharts5/./node_modules/d3-chord/src/math.js","webpack://@amcharts/amcharts5/./node_modules/d3-chord/src/chord.js","webpack://@amcharts/amcharts5/./node_modules/d3-chord/src/array.js","webpack://@amcharts/amcharts5/./node_modules/d3-chord/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3-chord/src/ribbon.js","webpack://@amcharts/amcharts5/./node_modules/d3-array/src/ascending.js","webpack://@amcharts/amcharts5/./node_modules/d3-array/src/descending.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selector.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/array.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selectorAll.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/matcher.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/selectChild.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/selectChildren.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/sparse.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/enter.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/data.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/sort.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/namespaces.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/namespace.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/attr.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/window.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/style.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/property.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/classed.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/text.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/html.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/raise.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/lower.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/creator.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/insert.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/remove.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/clone.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/on.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/dispatch.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/select.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/selectAll.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/filter.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/exit.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/join.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/merge.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/order.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/call.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/nodes.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/node.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/size.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/empty.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/each.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/append.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/datum.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-selection/src/selection/iterator.js","webpack://@amcharts/amcharts5/./node_modules/d3-timer/src/timeout.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/schedule.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/number.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/transform/parse.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/transform/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/tween.js","webpack://@amcharts/amcharts5/./node_modules/d3-color/src/define.js","webpack://@amcharts/amcharts5/./node_modules/d3-color/src/color.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/basis.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/color.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/rgb.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/basisClosed.js","webpack://@amcharts/amcharts5/./node_modules/d3-interpolate/src/string.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/interpolate.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/attr.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/attrTween.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/delay.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/duration.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/ease.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/on.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/selection.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/style.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/styleTween.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/textTween.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-ease/src/cubic.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/select.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/selectAll.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/filter.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/merge.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/transition.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/text.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/remove.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/easeVarying.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/transition/end.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/selection/transition.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/selection/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/selection/interrupt.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/node_modules/d3-transition/src/interrupt.js","webpack://@amcharts/amcharts5/./node_modules/d3-brush/src/brush.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selector.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/array.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selectorAll.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/matcher.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/selectChild.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/selectChildren.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/sparse.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/enter.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/data.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/sort.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/namespaces.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/namespace.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/attr.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/window.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/style.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/property.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/classed.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/text.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/html.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/raise.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/lower.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/creator.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/insert.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/remove.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/clone.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/on.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/dispatch.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/index.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/select.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/selectAll.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/filter.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/exit.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/join.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/merge.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/order.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/call.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/nodes.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/node.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/size.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/empty.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/each.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/append.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/datum.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-selection/src/selection/iterator.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/schedule.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/tween.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/interpolate.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/attr.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/attrTween.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/delay.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/duration.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/ease.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/on.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/selection.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/style.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/styleTween.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/textTween.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/index.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/select.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/selectAll.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/filter.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/merge.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/transition.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/text.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/remove.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/easeVarying.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/transition/end.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/selection/transition.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selector.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/array.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selectorAll.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/matcher.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/selection/index.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/selection/interrupt.js","webpack://@amcharts/amcharts5/./node_modules/d3/node_modules/d3-transition/src/interrupt.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/selectChild.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/selectChildren.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/sparse.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/enter.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/data.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/sort.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/namespaces.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/namespace.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/attr.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/window.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/style.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/property.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/classed.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/text.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/html.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/raise.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/lower.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/creator.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/insert.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/remove.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/clone.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/on.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/dispatch.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/select.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/selectAll.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/filter.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/exit.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/join.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/merge.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/order.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/call.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/nodes.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/node.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/size.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/empty.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/each.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/append.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/datum.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-selection/src/selection/iterator.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/schedule.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/tween.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/interpolate.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/attr.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/attrTween.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/delay.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/duration.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/ease.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/on.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/selection.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/style.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/styleTween.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/textTween.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/select.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/selectAll.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/filter.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/merge.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/transition.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/text.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/remove.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/easeVarying.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/transition/end.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/selection/transition.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/src/transform.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/selection/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/selection/interrupt.js","webpack://@amcharts/amcharts5/./node_modules/d3-zoom/node_modules/d3-transition/src/interrupt.js","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/FlowNode.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/FlowNodes.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/ChordNodes.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/FlowLink.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/ChordLink.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/Chord.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/ChordLinkDirected.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/ChordDirected.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/ChordNonRibbon.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/SankeyNodes.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/SankeyLink.ts","webpack://@amcharts/amcharts5/./node_modules/d3-array/src/sum.js","webpack://@amcharts/amcharts5/./node_modules/d3-array/src/max.js","webpack://@amcharts/amcharts5/./node_modules/d3-array/src/min.js","webpack://@amcharts/amcharts5/./node_modules/d3-sankey/src/align.js","webpack://@amcharts/amcharts5/./node_modules/d3-sankey/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3-sankey/src/sankey.js","webpack://@amcharts/amcharts5/./src/.internal/charts/flow/Sankey.ts","webpack://@amcharts/amcharts5/./tmp/webpack/flow.js"],"names":["setupDefaultRules","rule","ic","this","_root","interfaceColors","r","bind","setAll","width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","colors","ColorSet","legendLabelText","legendValueText","draggable","opacity","text","populateText","fillStyle","strokeStyle","events","on","e","dataItem","target","outgoing","get","linkDataItem","link","hover","hideTooltip","incoming","rectangle","showTooltip","unhover","orientation","nodeAlign","linkTension","nodePadding","nodeWidth","cornerRadiusTL","cornerRadiusBL","cornerRadiusTR","cornerRadiusBR","controlPointDistance","fillOpacity","strokeOpacity","interactive","tooltipText","states","create","y","centerY","x","centerX","radius","padAngle","startAngle","sort","linkHeadRadius","sourceRadius","targetRadius","cornerRadius","textType","headRadius","linkType","strokeWidth","Theme","children","push","Container","_defaultThemes","FlowDefaultTheme","new","fields","nodes","flow","_afterNew","bulletsContainer","processDataItem","unknown","sourceId","sourceDataItem","getDataItemById","_index","data","id","set","targetId","targetDataItem","addOutgoingLink","addincomingLink","makeLink","sourceIndex","dataItems","indexOf","targetIndex","_linksByIndex","_updateLinkColor","_userDataSet","_prepareChildren","valueLow","Infinity","valueHigh","valueSum","_valuesDirty","_nodesData","d3SankeyNode","sumIncoming","sumIncomingWorking","value","workingValue","sumOutgoing","sumOutgoingWorking","updateLegendValue","_linksData","valueWorking","minSize","d3SankeyLink","source","setRaw","setPrivateRaw","sourceFill","targetFill","remove","_applyTemplates","gradient","_fillGradient","LinearGradient","sourceStop","color","targetStop","undefined","_strokeGradient","disposeDataItem","links","removeValue","dispose","duration","promises","hideDataItem","hiddenState","stateAnimationDuration","stateAnimationEasing","easing","animate","key","to","waitForStop","hide","Promise","all","showDataItem","show","bullet","sprite","point","getPoint","_getBulletLocation","angle","Series","Flow","className","abs","Math","cos","sin","pi","PI","halfPi","tau","max","epsilon","range","i","j","Array","from","length","_","k","compareValue","compare","a","b","chordDirected","directed","transpose","sortGroups","sortSubgroups","sortChords","chord","matrix","dx","n","groupSums","groupIndex","chords","groups","Float64Array","x0","subgroupIndex","filter","index","endAngle","Object","values","arguments","slice","prototype","defaultSource","d","defaultTarget","defaultRadius","defaultStartAngle","defaultEndAngle","defaultPadAngle","defaultArrowheadRadius","ribbon","context","buffer","s","apply","t","ap","argv","call","sr","sa0","sa1","tr","ta0","ta1","path","moveTo","arc","hr","tr2","ta2","quadraticCurveTo","lineTo","closePath","ribbonArrow","NaN","none","selector","querySelector","empty","querySelectorAll","matches","childMatcher","node","find","childFirst","firstElementChild","update","EnterNode","parent","datum","ownerDocument","namespaceURI","_next","_parent","__data__","bindIndex","group","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","Map","keyValues","has","delete","constructor","appendChild","child","insertBefore","next","xhtml","svg","xlink","xml","xmlns","name","prefix","namespaces","hasOwnProperty","space","local","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","v","attrFunctionNS","defaultView","document","styleRemove","style","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","split","classList","ClassList","_node","_names","getAttribute","classedAdd","names","list","add","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","parentNode","lower","previousSibling","firstChild","creatorInherit","uri","documentElement","createElement","createElementNS","creatorFixed","namespace","constantNull","removeChild","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","parseTypenames","typenames","map","type","onRemove","typename","__on","o","m","removeEventListener","listener","options","onAdd","event","contextListener","addEventListener","dispatchEvent","params","window","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","join","splice","contains","root","Selection","parents","_groups","_parents","selection","select","subgroups","subnode","subgroup","selectAll","array","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","enterGroup","updateGroup","exitGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","append","merge","order","Error","groups0","groups1","m0","m1","min","merges","group0","group1","compareDocumentPosition","compareNode","sortgroups","sortgroup","callback","size","each","attr","getAttributeNS","property","classed","html","creator","insert","before","deep","dispatch","Symbol","iterator","delay","time","restart","elapsed","stop","emptyOn","emptyTween","timing","schedules","__transition","self","tween","start","state","timeout","timer","tick","ease","init","schedule","svgNode","degrees","translateX","translateY","rotate","skewX","scaleX","scaleY","c","f","sqrt","atan2","atan","interpolateTransform","parse","pxComma","pxParen","degParen","pop","q","xa","ya","xb","yb","number","translate","scale","interpolateTransformCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","transform","baseVal","consolidate","tweenRemove","tween0","tween1","tweenFunction","tweenValue","transition","_id","factory","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","format","l","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","g","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","isNaN","round","toString","h","Hsl","hslConvert","hsl2rgb","m2","basis","t1","v0","v1","v2","v3","t2","t3","copy","channels","assign","displayable","formatHsl","pow","nogamma","linear","rgbGamma","exponential","gamma","end","rgbSpline","spline","floor","reA","reB","am","bm","bs","bi","lastIndex","one","zero","interpolate","value1","string00","interpolate0","string1","string0","string10","attrInterpolate","attrInterpolateNS","attrTweenNS","t0","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","every","styleInterpolate","styleTween","textInterpolate","textTween","_name","newId","selection_prototype","cubicInOut","inherit","id0","id1","styleNull","listener0","styleMaybeRemove","removeFunction","easeVarying","that","resolve","reject","cancel","interrupt","defaultTiming","active","applyX","applyY","invert","location","invertX","invertY","rescaleX","domain","rescaleY","FlowNode","List","Template","Label","labels","template","themeTags","reset","makeNode","themeTag","make","addTag","_setDataItem","series","label","FlowNodes","RadialLabel","Slice","rectangles","insertIndex","_setSoft","toLocal","_dAngle","locationX","locationY","innerRadius","bulletRadius","classNames","concat","ChordNodes","_changed","isDirty","tooltipY","position","Percent","Graphics","FlowLink","_p0","_p1","_type","p","p0","p1","ChordLink","_settings","linksContainer","outgoingLink","getPrivate","_fixRibbon","_ribbon","chordChanged","_sizeDirty","_makeMatrix","_d3chord","ascending","descending","_chordLayout","innerWidth","innerHeight","chordGroup","labelAngle","setPrivate","_getLinkPoints","_updateLink","linkRadius","chordLayoutItem","chordStartAngle","startAngle0","angle0","startAngle1","angle1","display","Chord","ChordLinkDirected","_markDirtyKey","ChordDirected","_linkRadius","_chordLayoutItem","sourceSlice","targetSlice","ChordNonRibbon","RoundedRectangle","y0","updateSankey","SankeyNodes","_beforeChanged","_disposers","markDirty","isPrivateDirty","sourceNode","targetNode","_clear","x1","y1","xt0","yt0","xt1","yt1","xb0","xb1","yb0","yb1","xm0","xm1","ym0","ym1","w","cpd","kxt0","kyt0","kxt1","kyt1","kxm0","kym0","kxm1","kym1","dy","kxb0","kyb0","kxb1","kyb1","_fillGenerator","middleSegment","_strokeGenerator","_svgPath","_totalLength","getTotalLength","_positionBullets","getPointAtLength","toGlobal","_getTooltipPoint","SankeyLink","sum","valueof","targetDepth","depth","left","right","justify","sourceLinks","center","targetLinks","ascendingSourceBreadth","ascendingBreadth","ascendingTargetBreadth","defaultId","defaultNodes","graph","defaultLinks","nodeById","computeLinkBreadths","py","linkSort","align","iterations","sankey","computeNodeLinks","computeNodeValues","computeNodeDepths","computeNodeHeights","computeNodeBreadths","entries","fixedValue","current","Set","columns","kx","layer","column","computeNodeLayers","ky","reorderLinks","initializeNodeBreadths","alpha","beta","relaxRightToLeft","relaxLeftToRight","targetTop","reorderNodeLinks","resolveCollisions","sourceTop","subject","resolveCollisionsBottomToTop","resolveCollisionsTopToBottom","nodeId","nodeSort","extent","line","d3Graph","_d3Graph","_d3Sankey","fillGradient","strokeGradient","vertical","curve","d3Sankey","Sankey","am5flow"],"mappings":"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","file":"flow.js","sourcesContent":["import type { DataItem } from \"../../core/render/Component\";\r\nimport type { IFlowNodesDataItem } from \"../../charts/flow/FlowNodes\";\r\n\r\nimport { Theme } from \"../../core/Theme\";\r\nimport { percent, p100, p50 } from \"../../core/util/Percent\";\r\nimport { ColorSet } from \"../../core/util/ColorSet\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\n\r\nimport * as $array from \"../../core/util/Array\";\r\n\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport class FlowDefaultTheme extends Theme {\r\n\tprotected setupDefaultRules() {\r\n\t\tsuper.setupDefaultRules();\r\n\r\n\t\tconst ic = this._root.interfaceColors;\r\n\t\tconst r = this.rule.bind(this);\r\n\t\t/**\r\n\t\t * ========================================================================\r\n\t\t * charts/flow\r\n\t\t * ========================================================================\r\n\t\t */\r\n\r\n\t\tr(\"Flow\").setAll({\r\n\t\t\twidth: p100,\r\n\t\t\theight: p100,\r\n\t\t\tpaddingLeft: 10,\r\n\t\t\tpaddingRight: 10,\r\n\t\t\tpaddingTop: 10,\r\n\t\t\tpaddingBottom: 10\r\n\t\t});\r\n\r\n\t\tr(\"FlowNodes\").setAll({\r\n\t\t\tcolors: ColorSet.new(this._root, {}),\r\n\t\t\tlegendLabelText: \"{name}\",\r\n\t\t\tlegendValueText: \"{sumOutgoing.formatNumber('#.#')}\"\r\n\t\t});\r\n\r\n\t\tr(\"FlowNode\").setAll({\r\n\r\n\t\t});\r\n\r\n\t\tr(\"FlowNode\", [\"unknown\"]).setAll({\r\n\t\t\tdraggable: false,\r\n\t\t\topacity: 0\r\n\t\t});\r\n\r\n\t\tr(\"RadialLabel\", [\"flow\", \"node\"]).setAll({\r\n\t\t\ttext: \"{name}\",\r\n\t\t\tpopulateText: true\r\n\t\t});\r\n\r\n\t\tr(\"FlowLink\").setAll({\r\n\t\t\tfillStyle: \"gradient\",\r\n\t\t\tstrokeStyle: \"gradient\"\r\n\t\t});\r\n\r\n\t\tr(\"FlowLink\", [\"source\", \"unknown\"]).setAll({\r\n\t\t});\r\n\r\n\t\tr(\"FlowLink\", [\"target\", \"unknown\"]).setAll({\r\n\t\t});\r\n\r\n\r\n\t\tr(\"FlowNode\").events.on(\"pointerover\", (e) => {\r\n\t\t\tconst dataItem = e.target.dataItem as DataItem<IFlowNodesDataItem>;\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tconst outgoing = dataItem.get(\"outgoingLinks\")\r\n\t\t\t\tif (outgoing) {\r\n\t\t\t\t\t$array.each(outgoing, (linkDataItem) => {\r\n\t\t\t\t\t\tconst link = (linkDataItem as any).get(\"link\");\r\n\t\t\t\t\t\tlink.hover();\r\n\t\t\t\t\t\tlink.hideTooltip();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tconst incoming = dataItem.get(\"incomingLinks\")\r\n\t\t\t\tif (incoming) {\r\n\t\t\t\t\t$array.each(incoming, (linkDataItem) => {\r\n\t\t\t\t\t\tconst link = (linkDataItem as any).get(\"link\");\r\n\t\t\t\t\t\tlink.hover();\r\n\t\t\t\t\t\tlink.hideTooltip();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet rectangle = (<any>dataItem).get(\"slice\") || (<any>dataItem).get(\"rectangle\");\r\n\t\t\tif (rectangle && rectangle.get(\"tooltipText\")) {\r\n\t\t\t\trectangle.showTooltip();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tr(\"FlowNode\").events.on(\"pointerout\", (e) => {\r\n\t\t\tconst dataItem = e.target.dataItem as DataItem<IFlowNodesDataItem>;\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tconst outgoing = dataItem.get(\"outgoingLinks\")\r\n\t\t\t\tif (outgoing) {\r\n\t\t\t\t\t$array.each(outgoing, (linkDataItem) => {\r\n\t\t\t\t\t\t(linkDataItem as any).get(\"link\").unhover();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tconst incoming = dataItem.get(\"incomingLinks\")\r\n\t\t\t\tif (incoming) {\r\n\t\t\t\t\t$array.each(incoming, (linkDataItem) => {\r\n\t\t\t\t\t\t(linkDataItem as any).get(\"link\").unhover();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/flow: Sankey\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Sankey\").setAll({\r\n\t\t\torientation: \"horizontal\",\r\n\t\t\tnodeAlign: \"justify\",\r\n\t\t\tlinkTension: 0.5,\r\n\t\t\tnodePadding: 10,\r\n\t\t\tnodeWidth: 10\r\n\t\t});\r\n\r\n\t\t// Class: RoundedRectangle\r\n\t\tr(\"RoundedRectangle\", [\"sankey\", \"node\", \"shape\"]).setAll({\r\n\t\t\tcornerRadiusTL: 0,\r\n\t\t\tcornerRadiusBL: 0,\r\n\t\t\tcornerRadiusTR: 0,\r\n\t\t\tcornerRadiusBR: 0\r\n\t\t});\r\n\r\n\t\tr(\"SankeyLink\").setAll({\r\n\t\t\tcontrolPointDistance: 0.2\r\n\t\t});\r\n\r\n\t\tr(\"FlowNode\", [\"sankey\"]).setAll({\r\n\t\t\tdraggable: true\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"sankey\", \"link\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tfillOpacity: 0.2,\r\n\t\t\t\tstrokeOpacity: 0,\r\n\t\t\t\tinteractive: true,\r\n\t\t\t\ttooltipText: \"{sourceId} - {targetId}: {value}\"\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"grid\");\r\n\t\t}\r\n\r\n\t\tr(\"Graphics\", [\"sankey\", \"link\"]).states.create(\"hover\", { fillOpacity: 0.5 });\r\n\r\n\t\tr(\"Label\", [\"sankey\", \"node\"]).setAll({\r\n\t\t\ttext: \"{name}\",\r\n\t\t\tpopulateText: true\r\n\t\t});\r\n\r\n\t\tr(\"Label\", [\"sankey\", \"horizontal\"]).setAll({\r\n\t\t\ty: p50,\r\n\t\t\tcenterY: p50,\r\n\t\t\tpaddingLeft: 15\r\n\t\t});\r\n\r\n\t\tr(\"Label\", [\"sankey\", \"vertical\"]).setAll({\r\n\t\t\tx: p50,\r\n\t\t\tcenterX: p50,\r\n\t\t\tpaddingTop: 15\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/flow: Chord\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Chord\").setAll({\r\n\t\t\tradius: percent(90),\r\n\t\t\tnodeWidth: 10,\r\n\t\t\tpadAngle: 1,\r\n\t\t\tstartAngle: 0,\r\n\t\t\tsort: \"descending\"\r\n\t\t});\r\n\r\n\t\tr(\"ChordDirected\").setAll({\r\n\t\t\tlinkHeadRadius: 10\r\n\t\t});\r\n\r\n\t\tr(\"ChordNodes\").setAll({\r\n\t\t\tx: p50,\r\n\t\t\ty: p50\r\n\t\t});\r\n\r\n\t\tr(\"FlowNode\", [\"chord\"]).setAll({\r\n\t\t\tdraggable: true\r\n\t\t});\r\n\r\n\t\tr(\"ChordLink\").setAll({\r\n\t\t\tsourceRadius: p100,\r\n\t\t\ttargetRadius: p100,\r\n\t\t\tfillStyle: \"solid\",\r\n\t\t\tstrokeStyle: \"solid\",\r\n\t\t\ttooltipText: \"{sourceId} - {targetId}: {value}\"\r\n\t\t});\r\n\r\n\t\tr(\"Slice\", [\"chord\", \"node\", \"shape\"]).setAll({\r\n\t\t\tcornerRadius: 0\r\n\t\t})\r\n\r\n\t\tr(\"RadialLabel\", [\"chord\", \"node\"]).setAll({\r\n\t\t\tradius: 5,\r\n\t\t\ttextType: \"circular\"\r\n\t\t});\r\n\r\n\t\tr(\"ChordLinkDirected\").setAll({\r\n\t\t\theadRadius: 10\r\n\t\t});\r\n\r\n\t\t// Class: Graphics\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"chord\", \"link\", \"shape\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tfillOpacity: 0.2,\r\n\t\t\t\tstrokeOpacity: 0,\r\n\t\t\t\tinteractive: true\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"grid\");\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"grid\");\r\n\t\t}\r\n\r\n\t\tr(\"Graphics\", [\"chord\", \"link\", \"shape\"]).states.create(\"hover\", { fillOpacity: 0.5 });\r\n\r\n\t\tr(\"ChordNonRibbon\").setAll({\r\n\t\t\tlinkType: \"curve\" // \"line\" | \"curve\"\r\n\t\t})\r\n\r\n\t\tr(\"ChordLink\", [\"basic\"]).setAll({\r\n\t\t\tfillStyle: \"none\",\r\n\t\t\tstrokeStyle: \"source\"\r\n\t\t});\r\n\r\n\t\tr(\"Graphics\", [\"chord\", \"link\", \"shape\", \"basic\"]).setAll({\r\n\t\t\tstrokeOpacity: 0.4\r\n\t\t});\r\n\r\n\t\tr(\"Graphics\", [\"chord\", \"link\", \"shape\", \"basic\"]).states.create(\"hover\", { strokeWidth: 2, strokeOpacity: 1 });\r\n\r\n\t}\r\n}\r\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { Color } from \"../../core/util/Color\";\nimport type { FlowLink } from \"./FlowLink\";\nimport type { FlowNodes, IFlowNodesDataItem } from \"./FlowNodes\";\nimport type { ListTemplate } from \"../../core/util/List\";\nimport type { Bullet } from \"../../core/render/Bullet\";\nimport type * as d3sankey from \"d3-sankey\";\n\nimport { FlowDefaultTheme } from \"./FlowDefaultTheme\";\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate, ISeriesEvents } from \"../../core/render/Series\";\nimport { Container } from \"../../core/render/Container\";\nimport { LinearGradient } from \"../../core/render/gradients/LinearGradient\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\n\nexport interface IFlowDataItem extends ISeriesDataItem {\n\n\t/**\n\t * Link value.\n\t */\n\tvalue: number;\n\n\t/**\n\t * @ignore\n\t */\n\tvalueWorking: number;\n\n\t/**\n\t * Associated link element.\n\t */\n\tlink: FlowLink;\n\n\t/**\n\t * Link's color.\n\t */\n\tfill: Color;\n\n\t/**\n\t * @ignore\n\t */\n\td3SankeyLink: d3sankey.SankeyLink<d3sankey.SankeyExtraProperties, d3sankey.SankeyExtraProperties>;\n\n\t/**\n\t * An ID of the target node.\n\t */\n\ttargetId: string;\n\n\t/**\n\t * An ID of the source node.\n\t */\n\tsourceId: string;\n\n\t/**\n\t * A data item of the source node.\n\t */\n\tsource: DataItem<IFlowNodesDataItem>;\n\n\t/**\n\t * A data item of the target node.\n\t */\n\ttarget: DataItem<IFlowNodesDataItem>;\n\n}\n\nexport interface IFlowSettings extends ISeriesSettings {\n\n\t/**\n\t * A field in data which holds source node ID.\n\t */\n\tsourceIdField?: string;\n\n\t/**\n\t * A field in data which holds target node ID.\n\t */\n\ttargetIdField?: string;\n\n\t/**\n\t * The thickness of node strip in pixels.\n\t *\n\t * @default 10\n\t */\n\tnodeWidth?: number;\n\n\t/**\n\t * Minimum gap between adjacent nodes.\n\t *\n\t * @default 10\n\t */\n\tnodePadding?: number;\n\n\t/**\n\t * Minimum size of the node/link.\n\t * \n\t * It's a relative value to the sum of all values in the series. If set,\n\t * this relative value will be used for small value nodes when calculating\n\t * their size. For example, if it's set to `0.01`, small nodes will be\n\t * sized like their value is 1% of the total sum of all values in series.\n\t *\n\t * @since 5.1.5\n\t */\n\tminSize?: number;\n\n}\n\nexport interface IFlowPrivate extends ISeriesPrivate {\n\tvalueSum?: number;\n\tvalueLow?: number;\n\tvalueHigh?: number;\n}\n\nexport interface IFlowEvents extends ISeriesEvents {\n}\n\n/**\n * A base class for all flow type series: [[Sankey]] and [[Chord]].\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/flow-charts/} for more info\n */\nexport abstract class Flow extends Series {\n\tpublic static className: string = \"Flow\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([Flow.className]);\n\n\tdeclare public _settings: IFlowSettings;\n\tdeclare public _privateSettings: IFlowPrivate;\n\tdeclare public _dataItemSettings: IFlowDataItem;\n\tdeclare public _events: IFlowEvents;\n\n\t/**\n\t * @ignore\n\t */\n\tdeclare public readonly nodes: FlowNodes;\n\n\t/**\n\t * Container series will place their links in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly linksContainer = this.children.push(Container.new(this._root, {}));\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract readonly links: ListTemplate<FlowLink>;\n\n\tprotected _nodesData: d3sankey.SankeyNodeMinimal<{}, {}>[] = [];\n\tprotected _linksData: { source: d3sankey.SankeyNodeMinimal<{}, {}>, target: d3sankey.SankeyNodeMinimal<{}, {}>, value: number }[] = [];\n\tprotected _index = 0;\n\tprotected _nodesDataSet:boolean = false;\n\n\tprotected _linksByIndex: { [index: string]: any } = {};\n\tprotected _afterNew() {\n\t\tthis._defaultThemes.push(FlowDefaultTheme.new(this._root));\n\n\t\tthis.fields.push(\"disabled\", \"sourceId\", \"targetId\");\n\n\t\tif (this.nodes) {\n\t\t\tthis.nodes.flow = this;\n\t\t}\n\n\t\tsuper._afterNew();\n\n\t\tthis.children.push(this.bulletsContainer);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic abstract makeLink(dataItem: DataItem<this[\"_dataItemSettings\"]>): FlowLink;\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.processDataItem(dataItem);\n\n\t\tconst nodes = this.nodes;\n\t\tif (nodes) {\n\t\t\tlet unknown = false;\n\t\t\tlet sourceId = dataItem.get(\"sourceId\");\n\t\t\tlet sourceDataItem = nodes.getDataItemById(sourceId);\n\n\t\t\tif (!sourceDataItem) {\n\t\t\t\tif (sourceId == null) {\n\t\t\t\t\tsourceId = \"undefined\" + this._index;\n\t\t\t\t\tthis._index++;\n\t\t\t\t\tunknown = true;\n\t\t\t\t}\n\t\t\t\tnodes.data.push({ id: sourceId, unknown: unknown });\n\t\t\t\tsourceDataItem = nodes.getDataItemById(sourceId)!;\n\t\t\t\tif (!unknown) {\n\t\t\t\t\tsourceDataItem.set(\"name\", sourceId);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tunknown = false;\n\t\t\tlet targetId = dataItem.get(\"targetId\");\n\n\t\t\tlet targetDataItem = nodes.getDataItemById(targetId);\n\t\t\tif (!targetDataItem) {\n\t\t\t\tif (targetId == null) {\n\t\t\t\t\ttargetId = \"undefined\" + this._index;\n\t\t\t\t\tthis._index++;\n\t\t\t\t\tunknown = true;\n\t\t\t\t}\n\n\t\t\t\tnodes.data.push({ id: targetId, unknown: unknown });\n\t\t\t\ttargetDataItem = nodes.getDataItemById(targetId)!;\n\t\t\t\tif (!unknown) {\n\t\t\t\t\ttargetDataItem.set(\"name\", targetId);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (sourceDataItem) {\n\t\t\t\tdataItem.set(\"source\", sourceDataItem);\n\t\t\t\tnodes.addOutgoingLink(sourceDataItem, dataItem);\n\t\t\t}\n\n\t\t\tif (targetDataItem) {\n\t\t\t\tdataItem.set(\"target\", targetDataItem);\n\t\t\t\tnodes.addincomingLink(targetDataItem, dataItem);\n\t\t\t}\n\n\t\t\tdataItem.set(\"link\", this.makeLink(dataItem));\n\n\t\t\tconst sourceIndex = this.nodes.dataItems.indexOf(sourceDataItem);\n\t\t\tconst targetIndex = this.nodes.dataItems.indexOf(targetDataItem);\n\n\t\t\tthis._linksByIndex[sourceIndex + \"_\" + targetIndex] = dataItem;\n\n\t\t\tif (sourceDataItem.get(\"unknown\")) {\n\t\t\t\tif (targetDataItem) {\n\t\t\t\t\tsourceDataItem.set(\"fill\", targetDataItem.get(\"fill\"));\n\t\t\t\t}\n\n\t\t\t\tdataItem.get(\"link\").set(\"fillStyle\", \"gradient\");\n\t\t\t}\n\n\n\t\t\tif (targetDataItem.get(\"unknown\")) {\n\t\t\t\tif (sourceDataItem) {\n\t\t\t\t\ttargetDataItem.set(\"fill\", sourceDataItem.get(\"fill\"));\n\t\t\t\t}\n\n\t\t\t\tdataItem.get(\"link\").set(\"fillStyle\", \"gradient\");\n\t\t\t}\n\n\t\t\tthis._updateLinkColor(dataItem);\n\t\t}\n\t}\n\n\tprotected _onDataClear() {\n\t\tif(!this.nodes._userDataSet){\n\t\t\tthis.nodes.data.setAll([]);\n\t\t\tthis.nodes._userDataSet = false;\n\t\t}\n\n\t}\t\t\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tlet valueLow = Infinity;\n\t\tlet valueHigh = -Infinity;\n\t\tlet valueSum = 0;\n\n\t\tif (this._valuesDirty) {\n\t\t\tthis._nodesData = [];\n\t\t\tconst nodes = this.nodes;\n\t\t\tif (nodes) {\n\t\t\t\t$array.each(nodes.dataItems, (dataItem) => {\n\t\t\t\t\tconst d3SankeyNode = dataItem.get(\"d3SankeyNode\");\n\t\t\t\t\tthis._nodesData.push(d3SankeyNode);\n\n\t\t\t\t\tconst incoming = dataItem.get(\"incomingLinks\")\n\n\t\t\t\t\tlet sumIncoming = 0;\n\t\t\t\t\tlet sumIncomingWorking = 0;\n\t\t\t\t\tif (incoming) {\n\t\t\t\t\t\t$array.each(incoming, (link) => {\n\t\t\t\t\t\t\tconst value = link.get(\"value\");\n\t\t\t\t\t\t\tconst workingValue = link.get(\"valueWorking\");\n\t\t\t\t\t\t\tsumIncoming += value;\n\t\t\t\t\t\t\tsumIncomingWorking += workingValue;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tdataItem.set(\"sumIncoming\", sumIncoming);\n\t\t\t\t\tdataItem.set(\"sumIncomingWorking\", sumIncomingWorking);\n\n\t\t\t\t\tconst outgoing = dataItem.get(\"outgoingLinks\")\n\t\t\t\t\tlet sumOutgoing = 0;\n\t\t\t\t\tlet sumOutgoingWorking = 0;\n\t\t\t\t\tif (outgoing) {\n\t\t\t\t\t\t$array.each(outgoing, (link) => {\n\t\t\t\t\t\t\tconst value = link.get(\"value\");\n\t\t\t\t\t\t\tconst workingValue = link.get(\"valueWorking\");\n\t\t\t\t\t\t\tsumOutgoing += value;\n\t\t\t\t\t\t\tsumOutgoingWorking += workingValue;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tdataItem.set(\"sumOutgoing\", sumOutgoing);\n\t\t\t\t\tdataItem.set(\"sumOutgoingWorking\", sumOutgoingWorking);\n\n\t\t\t\t\tdataItem.set(\"sum\", sumIncoming + sumOutgoing);\n\t\t\t\t\tdataItem.set(\"sumWorking\", sumIncomingWorking + sumOutgoingWorking);\n\n\t\t\t\t\tnodes.updateLegendValue(dataItem);\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis._linksData = [];\n\n\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\tlet value = dataItem.get(\"value\");\n\t\t\t\tif ($type.isNumber(value)) {\n\t\t\t\t\tif (value < valueLow) {\n\t\t\t\t\t\tvalueLow = value;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value > valueHigh) {\n\t\t\t\t\t\tvalueHigh = value;\n\t\t\t\t\t}\n\t\t\t\t\tvalueSum += value;\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\tlet value = dataItem.get(\"value\");\n\t\t\t\tif ($type.isNumber(value)) {\n\t\t\t\t\tlet valueWorking = dataItem.get(\"valueWorking\");\n\t\t\t\t\tlet minSize = this.get(\"minSize\", 0);\n\t\t\t\t\tif (minSize > 0) {\n\t\t\t\t\t\tif (valueWorking < minSize * valueSum) {\n\t\t\t\t\t\t\tvalueWorking = minSize * valueSum;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet d3SankeyLink = { source: dataItem.get(\"source\").get(\"d3SankeyNode\"), target: dataItem.get(\"target\").get(\"d3SankeyNode\"), value: valueWorking };\n\t\t\t\t\tdataItem.setRaw(\"d3SankeyLink\", d3SankeyLink);\n\t\t\t\t\tthis._linksData.push(d3SankeyLink);\n\t\t\t\t\tthis.updateLegendValue(dataItem);\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tthis.setPrivateRaw(\"valueHigh\", valueHigh);\n\t\t\tthis.setPrivateRaw(\"valueLow\", valueLow);\n\t\t\tthis.setPrivateRaw(\"valueSum\", valueSum);\n\t\t}\n\t}\n\n\tpublic _updateLinkColor(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst link = dataItem.get(\"link\");\n\n\t\tconst fillStyle = link.get(\"fillStyle\");\n\t\tconst strokeStyle = link.get(\"strokeStyle\");\n\t\tconst source = dataItem.get(\"source\");\n\t\tconst target = dataItem.get(\"target\");\n\t\tconst sourceFill = source.get(\"fill\");\n\t\tconst targetFill = target.get(\"fill\");\n\t\tlink.remove(\"fillGradient\");\n\t\tlink.remove(\"strokeGradient\");\n\n\t\tswitch (fillStyle) {\n\n\t\t\tcase \"solid\":\n\t\t\t\tlink._applyTemplates();\n\t\t\t\tbreak;\n\t\t\tcase \"source\":\n\t\t\t\tlink.set(\"fill\", sourceFill);\n\t\t\t\tbreak;\n\n\t\t\tcase \"target\":\n\t\t\t\tlink.set(\"fill\", targetFill);\n\t\t\t\tbreak;\n\n\t\t\tcase \"gradient\":\n\t\t\t\tlet gradient = link._fillGradient;\n\t\t\t\tif (!gradient) {\n\t\t\t\t\tgradient = LinearGradient.new(this._root, {});\n\t\t\t\t\tconst sourceStop: any = { color: sourceFill }\n\t\t\t\t\tif (source.get(\"unknown\")) {\n\t\t\t\t\t\tsourceStop.opacity = 0;\n\t\t\t\t\t}\n\t\t\t\t\tconst targetStop: any = { color: targetFill };\n\t\t\t\t\tif (target.get(\"unknown\")) {\n\t\t\t\t\t\ttargetStop.opacity = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tgradient.set(\"stops\", [sourceStop, targetStop]);\n\t\t\t\t\tlink._fillGradient = gradient;\n\t\t\t\t}\n\t\t\t\tlink.set(\"fillGradient\", gradient);\n\t\t\t\tbreak;\n\t\t\tcase \"none\":\n\t\t\t\tlink.set(\"fill\", undefined); // do not use remove!\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (strokeStyle) {\n\t\t\tcase \"solid\":\n\t\t\t\tlink._applyTemplates();\n\t\t\t\tbreak;\n\n\t\t\tcase \"source\":\n\t\t\t\tlink.set(\"stroke\", sourceFill);\n\t\t\t\tbreak;\n\n\t\t\tcase \"target\":\n\t\t\t\tlink.set(\"stroke\", targetFill);\n\n\t\t\tcase \"gradient\":\n\t\t\t\tlet gradient = link._strokeGradient;\n\t\t\t\tif (!gradient) {\n\t\t\t\t\tgradient = LinearGradient.new(this._root, {});\n\t\t\t\t\tconst sourceStop: any = { color: sourceFill }\n\t\t\t\t\tif (source.get(\"unknown\")) {\n\t\t\t\t\t\tsourceStop.opacity = 0;\n\t\t\t\t\t}\n\t\t\t\t\tconst targetStop: any = { color: targetFill };\n\t\t\t\t\tif (target.get(\"unknown\")) {\n\t\t\t\t\t\ttargetStop.opacity = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tgradient.set(\"stops\", [sourceStop, targetStop]);\n\t\t\t\t\tlink._strokeGradient = gradient;\n\t\t\t\t}\n\t\t\t\tlink.set(\"strokeGradient\", gradient);\n\t\t\t\tbreak;\n\n\t\t\tcase \"none\":\n\t\t\t\tlink.remove(\"stroke\");\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tlet link = dataItem.get(\"link\");\n\t\tif (link) {\n\t\t\tthis.links.removeValue(link);\n\t\t\tlink.dispose();\n\t\t}\n\t}\n\n\t/**\n\t * Shows diagram's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.hideDataItem(dataItem, duration)];\n\t\tconst hiddenState = this.states.create(\"hidden\", {})\n\n\t\tconst stateAnimationDuration = \"stateAnimationDuration\";\n\t\tconst stateAnimationEasing = \"stateAnimationEasing\";\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = hiddenState.get(stateAnimationDuration, this.get(stateAnimationDuration, 0));\n\t\t}\n\n\t\tconst easing = hiddenState.get(stateAnimationEasing, this.get(stateAnimationEasing));\n\n\t\tpromises.push(dataItem.animate({ key: \"valueWorking\" as any, to: 0, duration: duration, easing: easing }).waitForStop());\n\n\t\tconst linkGraphics = dataItem.get(\"link\");\n\t\tlinkGraphics.hide();\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Shows diagram's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.showDataItem(dataItem, duration)];\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = this.get(\"stateAnimationDuration\", 0);\n\t\t}\n\n\t\tconst easing = this.get(\"stateAnimationEasing\");\n\n\t\tpromises.push(dataItem.animate({ key: \"valueWorking\" as any, to: dataItem.get(\"value\"), duration: duration, easing: easing }).waitForStop());\n\n\t\tconst linkGraphics = dataItem.get(\"link\");\n\t\tlinkGraphics.show();\n\n\t\tawait Promise.all(promises);\n\t}\n\n\tpublic _positionBullet(bullet: Bullet) {\n\t\tconst sprite = bullet.get(\"sprite\");\n\n\t\tif (sprite) {\n\t\t\tconst dataItem = sprite.dataItem as DataItem<this[\"_dataItemSettings\"]>;\n\t\t\tif (dataItem) {\n\t\t\t\tconst link = dataItem.get(\"link\");\n\t\t\t\tconst sprite = bullet.get(\"sprite\");\n\n\t\t\t\tif (sprite) {\n\t\t\t\t\tconst point = link.getPoint(this._getBulletLocation(bullet));\n\t\t\t\t\tsprite.setAll({ x: point.x, y: point.y });\n\n\t\t\t\t\tif (bullet.get(\"autoRotate\")) {\n\t\t\t\t\t\tsprite.set(\"rotation\", point.angle + bullet.get(\"autoRotateAngle\", 0));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getBulletLocation(bullet: Bullet): number {\n\t\treturn bullet.get(\"locationY\", 0);\n\t}\n}\n","export var abs = Math.abs;\nexport var cos = Math.cos;\nexport var sin = Math.sin;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = pi * 2;\nexport var max = Math.max;\nexport var epsilon = 1e-12;\n","import {max, tau} from \"./math.js\";\n\nfunction range(i, j) {\n  return Array.from({length: j - i}, (_, k) => i + k);\n}\n\nfunction compareValue(compare) {\n  return function(a, b) {\n    return compare(\n      a.source.value + a.target.value,\n      b.source.value + b.target.value\n    );\n  };\n}\n\nexport default function() {\n  return chord(false, false);\n}\n\nexport function chordTranspose() {\n  return chord(false, true);\n}\n\nexport function chordDirected() {\n  return chord(true, false);\n}\n\nfunction chord(directed, transpose) {\n  var padAngle = 0,\n      sortGroups = null,\n      sortSubgroups = null,\n      sortChords = null;\n\n  function chord(matrix) {\n    var n = matrix.length,\n        groupSums = new Array(n),\n        groupIndex = range(0, n),\n        chords = new Array(n * n),\n        groups = new Array(n),\n        k = 0, dx;\n\n    matrix = Float64Array.from({length: n * n}, transpose\n        ? (_, i) => matrix[i % n][i / n | 0]\n        : (_, i) => matrix[i / n | 0][i % n]);\n\n    // Compute the scaling factor from value to angle in [0, 2pi].\n    for (let i = 0; i < n; ++i) {\n      let x = 0;\n      for (let j = 0; j < n; ++j) x += matrix[i * n + j] + directed * matrix[j * n + i];\n      k += groupSums[i] = x;\n    }\n    k = max(0, tau - padAngle * n) / k;\n    dx = k ? padAngle : tau / n;\n\n    // Compute the angles for each group and constituent chord.\n    {\n      let x = 0;\n      if (sortGroups) groupIndex.sort((a, b) => sortGroups(groupSums[a], groupSums[b]));\n      for (const i of groupIndex) {\n        const x0 = x;\n        if (directed) {\n          const subgroupIndex = range(~n + 1, n).filter(j => j < 0 ? matrix[~j * n + i] : matrix[i * n + j]);\n          if (sortSubgroups) subgroupIndex.sort((a, b) => sortSubgroups(a < 0 ? -matrix[~a * n + i] : matrix[i * n + a], b < 0 ? -matrix[~b * n + i] : matrix[i * n + b]));\n          for (const j of subgroupIndex) {\n            if (j < 0) {\n              const chord = chords[~j * n + i] || (chords[~j * n + i] = {source: null, target: null});\n              chord.target = {index: i, startAngle: x, endAngle: x += matrix[~j * n + i] * k, value: matrix[~j * n + i]};\n            } else {\n              const chord = chords[i * n + j] || (chords[i * n + j] = {source: null, target: null});\n              chord.source = {index: i, startAngle: x, endAngle: x += matrix[i * n + j] * k, value: matrix[i * n + j]};\n            }\n          }\n          groups[i] = {index: i, startAngle: x0, endAngle: x, value: groupSums[i]};\n        } else {\n          const subgroupIndex = range(0, n).filter(j => matrix[i * n + j] || matrix[j * n + i]);\n          if (sortSubgroups) subgroupIndex.sort((a, b) => sortSubgroups(matrix[i * n + a], matrix[i * n + b]));\n          for (const j of subgroupIndex) {\n            let chord;\n            if (i < j) {\n              chord = chords[i * n + j] || (chords[i * n + j] = {source: null, target: null});\n              chord.source = {index: i, startAngle: x, endAngle: x += matrix[i * n + j] * k, value: matrix[i * n + j]};\n            } else {\n              chord = chords[j * n + i] || (chords[j * n + i] = {source: null, target: null});\n              chord.target = {index: i, startAngle: x, endAngle: x += matrix[i * n + j] * k, value: matrix[i * n + j]};\n              if (i === j) chord.source = chord.target;\n            }\n            if (chord.source && chord.target && chord.source.value < chord.target.value) {\n              const source = chord.source;\n              chord.source = chord.target;\n              chord.target = source;\n            }\n          }\n          groups[i] = {index: i, startAngle: x0, endAngle: x, value: groupSums[i]};\n        }\n        x += dx;\n      }\n    }\n\n    // Remove empty chords.\n    chords = Object.values(chords);\n    chords.groups = groups;\n    return sortChords ? chords.sort(sortChords) : chords;\n  }\n\n  chord.padAngle = function(_) {\n    return arguments.length ? (padAngle = max(0, _), chord) : padAngle;\n  };\n\n  chord.sortGroups = function(_) {\n    return arguments.length ? (sortGroups = _, chord) : sortGroups;\n  };\n\n  chord.sortSubgroups = function(_) {\n    return arguments.length ? (sortSubgroups = _, chord) : sortSubgroups;\n  };\n\n  chord.sortChords = function(_) {\n    return arguments.length ? (_ == null ? sortChords = null : (sortChords = compareValue(_))._ = _, chord) : sortChords && sortChords._;\n  };\n\n  return chord;\n}\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport {abs, cos, epsilon, halfPi, sin} from \"./math.js\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction defaultPadAngle() {\n  return 0;\n}\n\nfunction defaultArrowheadRadius() {\n  return 10;\n}\n\nfunction ribbon(headRadius) {\n  var source = defaultSource,\n      target = defaultTarget,\n      sourceRadius = defaultRadius,\n      targetRadius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      padAngle = defaultPadAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        s = source.apply(this, arguments),\n        t = target.apply(this, arguments),\n        ap = padAngle.apply(this, arguments) / 2,\n        argv = slice.call(arguments),\n        sr = +sourceRadius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        tr = +targetRadius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n\n    if (!context) context = buffer = path();\n\n    if (ap > epsilon) {\n      if (abs(sa1 - sa0) > ap * 2 + epsilon) sa1 > sa0 ? (sa0 += ap, sa1 -= ap) : (sa0 -= ap, sa1 += ap);\n      else sa0 = sa1 = (sa0 + sa1) / 2;\n      if (abs(ta1 - ta0) > ap * 2 + epsilon) ta1 > ta0 ? (ta0 += ap, ta1 -= ap) : (ta0 -= ap, ta1 += ap);\n      else ta0 = ta1 = (ta0 + ta1) / 2;\n    }\n\n    context.moveTo(sr * cos(sa0), sr * sin(sa0));\n    context.arc(0, 0, sr, sa0, sa1);\n    if (sa0 !== ta0 || sa1 !== ta1) {\n      if (headRadius) {\n        var hr = +headRadius.apply(this, arguments), tr2 = tr - hr, ta2 = (ta0 + ta1) / 2;\n        context.quadraticCurveTo(0, 0, tr2 * cos(ta0), tr2 * sin(ta0));\n        context.lineTo(tr * cos(ta2), tr * sin(ta2));\n        context.lineTo(tr2 * cos(ta1), tr2 * sin(ta1));\n      } else {\n        context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n        context.arc(0, 0, tr, ta0, ta1);\n      }\n    }\n    context.quadraticCurveTo(0, 0, sr * cos(sa0), sr * sin(sa0));\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  if (headRadius) ribbon.headRadius = function(_) {\n    return arguments.length ? (headRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : headRadius;\n  };\n\n  ribbon.radius = function(_) {\n    return arguments.length ? (sourceRadius = targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.sourceRadius = function(_) {\n    return arguments.length ? (sourceRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.targetRadius = function(_) {\n    return arguments.length ? (targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : targetRadius;\n  };\n\n  ribbon.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : padAngle;\n  };\n\n  ribbon.source = function(_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function(_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), ribbon) : context;\n  };\n\n  return ribbon;\n}\n\nexport default function() {\n  return ribbon();\n}\n\nexport function ribbonArrow() {\n  return ribbon(defaultArrowheadRadius);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name “__brush” rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start().brush().end();\n          });\n    }\n  };\n\n  brush.clear = function(group) {\n    brush.move(group, null);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move();\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move();\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move();\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move();\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { IFlowNodesDataItem, FlowNodes } from \"./FlowNodes\";\n\nimport { Container, IContainerPrivate, IContainerSettings } from \"../../core/render/Container\";\n\nexport interface IFlowNodeSettings extends IContainerSettings {\n}\n\nexport interface IFlowNodePrivate extends IContainerPrivate {\n}\n\n/**\n * Base class for flow chart nodes.\n */\nexport class FlowNode extends Container {\n\n\t/**\n\t * Related series.\n\t */\n\tpublic series: FlowNodes | undefined;\n\n\tdeclare public _settings: IFlowNodeSettings;\n\tdeclare public _privateSettings: IFlowNodePrivate;\n\n\tpublic static className: string = \"FlowNode\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([FlowNode.className]);\n\n\tdeclare protected _dataItem: DataItem<IFlowNodesDataItem> | undefined;\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { Color } from \"../../core/util/Color\";\nimport type { Time } from \"../../core/util/Animation\";\nimport type { Flow, IFlowDataItem } from \"./Flow\";\nimport type * as d3sankey from \"d3-sankey\";\n\nimport { Label } from \"../../core/render/Label\";\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate, ISeriesEvents } from \"../../core/render/Series\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { FlowNode } from \"./FlowNode\";\nimport type { ColorSet } from \"../../core/util/ColorSet\";\n\nimport * as $array from \"../../core/util/Array\";\n\nexport interface IFlowNodesDataItem extends ISeriesDataItem {\n\n\t/**\n\t * Node name.\n\t */\n\tname: string;\n\n\t/**\n\t * An associated node instance.\n\t */\n\tnode: FlowNode;\n\n\t/**\n\t * Node label.\n\t */\n\tlabel: Label;\n\n\t/**\n\t * Node color.\n\t */\n\tfill: Color;\n\n\t/**\n\t * Indicates \"unknown\" node.\n\t */\n\tunknown: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\td3SankeyNode: d3sankey.SankeyNode<d3sankey.SankeyExtraProperties, d3sankey.SankeyExtraProperties>;\n\n\t/**\n\t * Sum of values of all incoming links.\n\t */\n\tsumIncoming: number;\n\n\t/**\n\t * Sum of values of all outgoing links.\n\t */\n\tsumOutgoing: number;\n\n\t/**\n\t * @ignore\n\t */\n\tsumIncomingWorking: number;\n\n\t/**\n\t * @ignore\n\t */\n\tsumOutgoingWorking: number;\n\n\t/**\n\t * Sum of values of all links: incoming and outgoing.\n\t */\n\tsum: number;\n\n\t/**\n\t * @ignore\n\t */\n\tsumWorking: number;\n\n\t/**\n\t * A list of incoming link data items.\n\t */\n\tincomingLinks: Array<DataItem<IFlowDataItem>>;\n\n\t/**\n\t * A list of outgoing link data items.\n\t */\n\toutgoingLinks: Array<DataItem<IFlowDataItem>>;\n\n\t/**\n\t * Depth of the node.\n\t */\n\tdepth: number;\n\n}\n\nexport interface IFlowNodesSettings extends ISeriesSettings {\n\n\t/**\n\t * A field in data boolean setting if the node is \"unknown\".\n\t *\n\t * @default \"unknown\"\n\t */\n\tunknownField?: string;\n\n\t/**\n\t * A field in data that holds name for the node.\n\t *\n\t * @default \"id\"\n\t */\n\tnameField?: string;\n\n\t/**\n\t * A field in data that holds color used for fills nodes.\n\t *\n\t * @default \"fill\"\n\t */\n\tfillField?: string;\n\n\t/**\n\t * A [[ColorSet]] that series will use to apply to its nodes.\n\t */\n\tcolors?: ColorSet;\n\n\t/**\n\t * Animation duration in ms.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * Easing function to use for node animations.\n\t */\n\tanimationEasing?: (t: Time) => Time;\n}\n\nexport interface IFlowNodesPrivate extends ISeriesPrivate {\n}\n\nexport interface IFlowNodesEvents extends ISeriesEvents {\n}\n\n\n/**\n * Holds instances of nodes for a [[Flow]] series.\n */\nexport abstract class FlowNodes extends Series {\n\tpublic static className: string = \"FlowNodes\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([FlowNodes.className]);\n\n\tdeclare public _settings: IFlowNodesSettings;\n\tdeclare public _privateSettings: IFlowNodesPrivate;\n\tdeclare public _dataItemSettings: IFlowNodesDataItem;\n\tdeclare public _events: IFlowNodesEvents;\n\n\t/**\n\t * List of label elements.\n\t *\n\t * @default new ListTemplate<Label>\n\t */\n\tpublic readonly labels: ListTemplate<Label> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Label._new(this._root, {}, [this.labels.template])\n\t);\n\n\t/**\n\t * List of node elements.\n\t *\n\t * @default new ListTemplate<FlowNode>\n\t */\n\tpublic readonly nodes: ListTemplate<FlowNode> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => FlowNode._new(this._root, { themeTags: [\"node\"] }, [this.nodes.template])\n\t);\n\n\t/**\n\t * Related [[Flow]] series.\n\t */\n\tpublic abstract flow: Flow | undefined;\n\n\tpublic _userDataSet = false;\n\n\tprotected _afterNew() {\n\t\tthis.fields.push(\"unknown\", \"name\", \"fill\");\n\n\t\tthis.set(\"idField\", \"id\");\n\t\tthis.set(\"nameField\", \"id\");\n\t\tthis.set(\"fillField\", \"fill\");\n\t\tthis.set(\"unknownField\", \"unknown\");\n\n\t\tthis.children.push(this.bulletsContainer);\n\n\t\tsuper._afterNew();\n\t}\n\n\tprotected _onDataClear() {\n\t\tconst colors = this.get(\"colors\");\n\t\tif (colors) {\n\t\t\tcolors.reset();\n\t\t}\n\n\t\tthis._userDataSet = true;\n\t}\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.processDataItem(dataItem);\n\t\tdataItem.setRaw(\"d3SankeyNode\", { name: dataItem.get(\"id\"), dataItem: dataItem });\n\n\t\tif (dataItem.get(\"fill\") == null) {\n\t\t\tlet colors = this.get(\"colors\");\n\t\t\tif (colors) {\n\t\t\t\tdataItem.setRaw(\"fill\", colors.next());\n\t\t\t}\n\t\t}\n\n\t\tdataItem.setRaw(\"node\", this.makeNode(dataItem));\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>, themeTag?: string): FlowNode {\n\n\t\tconst node = this.nodes.make();\n\t\tthis.nodes.push(node);\n\n\t\tif (themeTag) {\n\t\t\tnode.addTag(themeTag);\n\t\t}\n\n\t\tif (dataItem.get(\"unknown\")) {\n\t\t\tnode.addTag(\"unknown\");\n\t\t}\n\n\t\tthis.children.push(node);\n\t\tnode._setDataItem(dataItem);\n\t\tnode.series = this;\n\n\t\tdataItem.set(\"node\", node);\n\t\treturn node;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tlet node = dataItem.get(\"node\");\n\t\tif (node) {\n\t\t\tthis.nodes.removeValue(node);\n\t\t\tnode.dispose();\n\t\t}\n\t\tlet label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tthis.labels.removeValue(label);\n\t\t\tlabel.dispose();\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic addincomingLink(dataItem: DataItem<this[\"_dataItemSettings\"]>, link: DataItem<IFlowDataItem>) {\n\t\tlet incoming = dataItem.get(\"incomingLinks\");\n\t\tif (!incoming) {\n\t\t\tincoming = [];\n\t\t\tdataItem.set(\"incomingLinks\", incoming)\n\t\t}\n\t\tincoming.push(link);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic addOutgoingLink(dataItem: DataItem<this[\"_dataItemSettings\"]>, link: DataItem<IFlowDataItem>) {\n\t\tlet outgoing = dataItem.get(\"outgoingLinks\");\n\t\tif (!outgoing) {\n\t\t\toutgoing = [];\n\t\t\tdataItem.set(\"outgoingLinks\", outgoing)\n\t\t}\n\t\toutgoing.push(link);\n\t}\n\n\t/**\n\t * Shows node's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.showDataItem(dataItem, duration)];\n\t\tconst flow = this.flow;\n\t\tif (flow) {\n\n\t\t\tlet label = dataItem.get(\"label\");\n\n\t\t\tif (label) {\n\t\t\t\tlabel.show(duration);\n\t\t\t}\n\n\t\t\tlet links = dataItem.get(\"outgoingLinks\");\n\t\t\tif (links) {\n\t\t\t\t$array.each(links, (link) => {\n\t\t\t\t\tflow.showDataItem(link, duration);\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tlinks = dataItem.get(\"incomingLinks\");\n\t\t\tif (links) {\n\t\t\t\t$array.each(links, (link) => {\n\t\t\t\t\tflow.showDataItem(link, duration);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tawait promises;\n\t}\n\n\t/**\n\t * Hides series's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.hideDataItem(dataItem, duration)];\n\n\t\tconst flow = this.flow;\n\t\tif (flow) {\n\n\t\t\tlet label = dataItem.get(\"label\");\n\n\t\t\tif (label) {\n\t\t\t\tlabel.hide(duration);\n\t\t\t}\n\n\t\t\tlet links = dataItem.get(\"outgoingLinks\");\n\n\t\t\tif (links) {\n\t\t\t\t$array.each(links, (link) => {\n\t\t\t\t\tflow.hideDataItem(link, duration);\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tlinks = dataItem.get(\"incomingLinks\");\n\n\t\t\tif (links) {\n\n\t\t\t\t$array.each(links, (link) => {\n\t\t\t\t\tflow.hideDataItem(link, duration);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tawait promises;\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { FlowNode } from \"./FlowNode\";\nimport type { Chord } from \"./Chord\";\nimport type { Bullet } from \"../../core/render/Bullet\";\n\nimport { FlowNodes, IFlowNodesSettings, IFlowNodesDataItem, IFlowNodesPrivate, IFlowNodesEvents } from \"./FlowNodes\";\nimport { Slice } from \"../../core/render/Slice\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { RadialLabel } from \"../../core/render/RadialLabel\";\n\nimport * as $math from \"../../core/util/Math\";\n\nexport interface IChordNodesDataItem extends IFlowNodesDataItem {\n\n\t/**\n\t * Node [[Slice]] element.\n\t */\n\tslice: Slice;\n\n\t/**\n\t * Node label element.\n\t */\n\tlabel: RadialLabel;\n\n}\n\nexport interface IChordNodesSettings extends IFlowNodesSettings {\n}\n\nexport interface IChordNodesPrivate extends IFlowNodesPrivate {\n}\n\nexport interface IChordNodesEvents extends IFlowNodesEvents {\n}\n\n/**\n * Holds instances of nodes for a [[Chord]] series.\n */\nexport class ChordNodes extends FlowNodes {\n\tpublic static className: string = \"ChordNodes\";\n\tpublic static classNames: Array<string> = FlowNodes.classNames.concat([ChordNodes.className]);\n\n\t/**\n\t * List of label elements.\n\t *\n\t * @default new ListTemplate<RadialLabel>\n\t */\n\tpublic readonly labels: ListTemplate<RadialLabel> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RadialLabel._new(this._root, {}, [this.labels.template])\n\t);\n\n\tdeclare public _settings: IChordNodesSettings;\n\tdeclare public _privateSettings: IChordNodesPrivate;\n\tdeclare public _dataItemSettings: IChordNodesDataItem;\n\tdeclare public _events: IChordNodesEvents;\n\n\t/**\n\t * Related [[Chord]] series.\n\t */\n\tpublic flow: Chord | undefined;\n\n\tprotected _dAngle: number = 0;\n\n\t/**\n\t * List of slice elements.\n\t *\n\t * @default new ListTemplate<Slice>\n\t */\n\tpublic readonly rectangles: ListTemplate<Slice> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Slice._new(this._root, { themeTags: [\"shape\"] }, [this.rectangles.template])\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): FlowNode {\n\t\tconst node = super.makeNode(dataItem, \"chord\");\n\n\t\tconst slice = node.children.insertIndex(0, this.rectangles.make());\n\t\tdataItem.set(\"slice\", slice);\n\t\tslice._setSoft(\"fill\", dataItem.get(\"fill\"));\n\n\t\tconst label = this.labels.make();\n\t\tthis.labels.push(label);\n\t\tlabel.addTag(\"flow\");\n\t\tlabel.addTag(\"chord\");\n\t\tlabel.addTag(\"node\");\n\n\t\tnode.children.push(label);\n\t\tdataItem.set(\"label\", label);\n\n\t\tnode.events.on(\"dragstart\", (e) => {\n\t\t\tlet point = this.toLocal(e.point);\n\t\t\tconst angle = $math.getAngle({ x: 0, y: 0 }, point);\n\t\t\tif (this.flow) {\n\t\t\t\tthis._dAngle = this.flow.get(\"startAngle\", 0) - angle;\n\t\t\t}\n\t\t})\n\n\t\tnode.events.on(\"dragged\", (e) => {\n\t\t\tlet point = this.toLocal(e.point);\n\t\t\tconst angle = $math.getAngle({ x: 0, y: 0 }, point);\n\n\t\t\tnode.setAll({ x: 0, y: 0 });\n\t\t\tif (this.flow) {\n\t\t\t\tthis.flow.set(\"startAngle\", angle + this._dAngle);\n\t\t\t}\n\t\t})\n\n\t\tlabel._setDataItem(dataItem);\n\t\tslice._setDataItem(dataItem);\n\n\t\treturn node;\n\t}\n\n\tpublic _positionBullet(bullet: Bullet) {\n\t\tconst sprite = bullet.get(\"sprite\");\n\t\tif (sprite) {\n\t\t\tconst dataItem = sprite.dataItem as DataItem<this[\"_dataItemSettings\"]>;\n\t\t\tif (dataItem) {\n\t\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\t\tif (sprite) {\n\t\t\t\t\tconst slice = dataItem.get(\"slice\");\n\t\t\t\t\tconst locationX = bullet.get(\"locationX\", 0.5);\n\t\t\t\t\tconst locationY = bullet.get(\"locationY\", 0.5);\n\t\t\t\t\tif (slice) {\n\t\t\t\t\t\tconst radius = slice.get(\"radius\", 0);\n\t\t\t\t\t\tconst innerRadius = slice.get(\"innerRadius\", 0);\n\t\t\t\t\t\tconst bulletRadius = innerRadius + (radius - innerRadius) * locationY;\n\t\t\t\t\t\tconst angle = slice.get(\"startAngle\", 0) + slice.get(\"arc\", 0) * locationX;\n\t\t\t\t\t\tsprite.setAll({ x: bulletRadius * $math.cos(angle), y: bulletRadius * $math.sin(angle) });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"../../core/render/Graphics\";\nimport type { IFlowNodesDataItem } from \"./FlowNodes\";\nimport type { IFlowDataItem, Flow } from \"./Flow\";\nimport type { IOrientationPoint, IPoint } from \"../../core/util/IPoint\";\nimport type { LinearGradient } from \"../../core/render/gradients/LinearGradient\";\nimport { Percent } from \"../../core/util/Percent\";\n\nexport interface IFlowLinkSettings extends IGraphicsSettings {\n\n\t/**\n\t * Source node data item.\n\t */\n\tsource?: DataItem<IFlowNodesDataItem>;\n\n\t/**\n\t * Source node data item.\n\t */\n\ttarget?: DataItem<IFlowNodesDataItem>;\n\n\t/**\n\t * Type of fill to use for links.\n\t */\n\tfillStyle?: \"solid\" | \"source\" | \"target\" | \"gradient\" | \"none\";\n\n\t/**\n\t * Type of outline to use for links.\n\t */\n\tstrokeStyle?: \"solid\" | \"source\" | \"target\" | \"gradient\" | \"none\";\n\n}\n\nexport interface IFlowLinkPrivate extends IGraphicsPrivate {\n}\n\n/**\n * A base class for a flow link.\n */\nexport abstract class FlowLink extends Graphics {\n\n\tpublic series: Flow | undefined;\n\n\tdeclare public _settings: IFlowLinkSettings;\n\tdeclare public _privateSettings: IFlowLinkPrivate;\n\n\tpublic static className: string = \"FlowLink\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([FlowLink.className]);\n\n\tdeclare protected _dataItem: DataItem<IFlowDataItem> | undefined;\n\n\tpublic _fillGradient: LinearGradient | undefined;\n\tpublic _strokeGradient: LinearGradient | undefined;\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\t\tif (this.isDirty(\"fillStyle\")) {\n\t\t\tconst series = this.series;\n\t\t\tconst dataItem = this.dataItem as DataItem<IFlowDataItem>;\n\t\t\tif (series && dataItem) {\n\t\t\t\tseries._updateLinkColor(dataItem);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic abstract getPoint(location: number): IOrientationPoint;\n\n\tpublic _getTooltipPoint(): IPoint {\n\t\tlet tooltipY = this.get(\"tooltipY\");\n\t\tlet position = 0.5;\n\t\tif (tooltipY instanceof Percent) {\n\t\t\tposition = tooltipY.value;\n\t\t}\n\n\t\treturn this.getPoint(position);\n\t}\n}\n","import { FlowLink, IFlowLinkPrivate, IFlowLinkSettings } from \"./FlowLink\";\nimport type { DataItem } from \"../../core/render/Component\";\nimport type { IChordNodesDataItem } from \"./ChordNodes\";\nimport type { Percent } from \"../../core/util/Percent\";\nimport type { Chord, IChordDataItem } from \"./Chord\";\nimport type { IOrientationPoint, IPoint } from \"../../core/util/IPoint\";\nimport * as $math from \"../../core/util/Math\";\n\nexport interface IChordLinkSettings extends IFlowLinkSettings {\n\n\t/**\n\t * Source data item.\n\t */\n\tsource?: DataItem<IChordNodesDataItem>;\n\n\t/**\n\t * target data item.\n\t */\n\ttarget?: DataItem<IChordNodesDataItem>;\n\n\t/**\n\t * Radius of the link at the source.\n\t */\n\tsourceRadius?: number | Percent;\n\n\t/**\n\t * Radius of the link at the end (target).\n\t */\n\ttargetRadius?: number | Percent;\n\n}\n\nexport interface IChordLinkPrivate extends IFlowLinkPrivate {\n}\n\n/**\n * A link element used in [[Chord]] chart.\n */\nexport class ChordLink extends FlowLink {\n\n\tpublic _p0: IPoint | undefined;\n\tpublic _p1: IPoint | undefined;\n\n\tpublic _type: \"line\" | \"curve\" | undefined;\n\n\tdeclare public _settings: IChordLinkSettings;\n\tdeclare public _privateSettings: IChordLinkPrivate;\n\n\tpublic static className: string = \"ChordLink\";\n\tpublic static classNames: Array<string> = FlowLink.classNames.concat([ChordLink.className]);\n\n\tdeclare protected _dataItem: DataItem<IChordDataItem> | undefined;\n\n\tdeclare public series: Chord | undefined;\n\n\tpublic getPoint(location: number): IOrientationPoint {\n\t\tif (this._p0 && this._p1) {\n\t\t\tif (this._type === \"line\") {\n\t\t\t\tlet p = $math.getPointOnLine(this._p0, this._p1, location);\n\t\t\t\treturn { x: p.x, y: p.y, angle: $math.getAngle(this._p0, this._p1) };\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet p0 = $math.getPointOnQuadraticCurve(this._p0, this._p1, { x: 0, y: 0 }, Math.max(0, location - 0.01));\n\t\t\t\tlet p1 = $math.getPointOnQuadraticCurve(this._p0, this._p1, { x: 0, y: 0 }, Math.min(1, location + 0.01));\n\t\t\t\tlet p = $math.getPointOnQuadraticCurve(this._p0, this._p1, { x: 0, y: 0 }, location);\n\n\t\t\t\treturn { x: p.x, y: p.y, angle: $math.getAngle(p0, p1) };\n\t\t\t}\n\t\t}\n\t\treturn { x: 0, y: 0, angle: 0 };\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { RadialLabel } from \"../../core/render/RadialLabel\";\n\nimport { Flow, IFlowSettings, IFlowDataItem, IFlowPrivate, IFlowEvents } from \"./Flow\";\nimport { chord, ribbon, RibbonGenerator, RibbonSubgroup, Ribbon } from \"d3-chord\";\nimport { ascending, descending } from \"d3\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { ChordNodes, IChordNodesDataItem } from \"./ChordNodes\";\nimport { ChordLink } from \"./ChordLink\";\nimport { Percent, p100, p50 } from \"../../core/util/Percent\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $math from \"../../core/util/Math\";\n\n\nexport interface IChordDataItem extends IFlowDataItem {\n\n\t/**\n\t * A link element.\n\t */\n\tlink: ChordLink;\n\n\t/**\n\t * A label element.\n\t */\n\tlabel: RadialLabel;\n\n\t/**\n\t * Source node data item.\n\t */\n\tsource: DataItem<IChordNodesDataItem>;\n\n\t/**\n\t * Target node data item.\n\t */\n\ttarget: DataItem<IChordNodesDataItem>;\n\n}\n\nexport interface IChordSettings extends IFlowSettings {\n\n\t/**\n\t * Angle of a gap between each node, in degrees.\n\t *\n\t * @default 1\n\t */\n\tpadAngle?: number;\n\n\t/**\n\t * Radius of the diagram in percent or pixels.\n\t *\n\t * If set in percent, it will be relative to the whole area available for\n\t * the series.\n\t *\n\t * @default 90%\n\t */\n\tradius?: number | Percent;\n\n\t/**\n\t * The thickness of node strip in pixels.\n\t *\n\t * @default 10\n\t */\n\tnodeWidth?: number;\n\n\t/**\n\t * Starting angle in degrees.\n\t *\n\t * @default 0\n\t */\n\tstartAngle?: number;\n\n\t/**\n\t * How to sort nodes by their value.\n\t *\n\t * @default \"descending\"\n\t */\n\tsort?: \"ascending\" | \"descending\" | \"none\"\n\n}\n\nexport interface IChordPrivate extends IFlowPrivate {\n}\n\nexport interface IChordEvents extends IFlowEvents {\n}\n\n/**\n * Regular chord series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/flow-charts/} for more information\n * @important\n */\nexport class Chord extends Flow {\n\n\tpublic static className: string = \"Chord\";\n\tpublic static classNames: Array<string> = Flow.classNames.concat([Chord.className]);\n\n\t/**\n\t * List of link elements.\n\t *\n\t * @default new ListTemplate<ChordLink>\n\t */\n\tpublic readonly links: ListTemplate<ChordLink> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => ChordLink._new(this._root, { themeTags: [\"link\", \"shape\"] }, [this.links.template])\n\t);\n\n\t/**\n\t * A series for all chord nodes.\n\t *\n\t * @default ChordNodes.new()\n\t */\n\tpublic readonly nodes: ChordNodes = this.children.push(ChordNodes.new(this._root, {}));\n\n\tdeclare public _settings: IChordSettings;\n\tdeclare public _privateSettings: IChordPrivate;\n\tdeclare public _dataItemSettings: IChordDataItem;\n\tdeclare public _events: IChordEvents;\n\n\tpublic _d3chord = chord();\n\tpublic _chordLayout: { source: { index: number, startAngle: number, endAngle: number, value: number }, target: { index: number, startAngle: number, endAngle: number, value: number } }[] = [];\n\tpublic _ribbon = ribbon();\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"chord\"]);\n\t\tthis.linksContainer.setAll({ x: p50, y: p50 })\n\t\tthis.bulletsContainer.setAll({ x: p50, y: p50 });\n\t\tsuper._afterNew();\n\t}\n\n\tprotected _fixRibbon(ribbon: RibbonGenerator<any, Ribbon, RibbonSubgroup>) {\n\t\tribbon.startAngle((d) => {\n\t\t\treturn d.startAngle + this.get(\"startAngle\", 0) * $math.RADIANS + Math.PI / 2;\n\t\t})\n\n\t\tribbon.endAngle((d) => {\n\t\t\treturn d.endAngle + this.get(\"startAngle\", 0) * $math.RADIANS + Math.PI / 2;\n\t\t})\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLink(dataItem: DataItem<this[\"_dataItemSettings\"]>): ChordLink {\n\t\tconst link = this.linksContainer.children.push(this.links.make());\n\t\tthis.links.push(link);\n\t\tlink._setDataItem(dataItem);\n\t\tlink.set(\"source\", dataItem.get(\"source\"));\n\t\tlink.set(\"target\", dataItem.get(\"target\"));\n\t\tlink.series = this;\n\t\treturn link;\n\t}\n\n\tprotected _makeMatrix(): number[][] {\n\t\tconst matrix: number[][] = [];\n\t\t$array.each(this.nodes.dataItems, (sourceDataItem) => {\n\t\t\tconst group: number[] = [];\n\t\t\tmatrix.push(group);\n\t\t\tlet outgoing = sourceDataItem.get(\"outgoingLinks\");\n\n\t\t\t$array.each(this.nodes.dataItems, (targetDataItem) => {\n\t\t\t\tlet value = 0;\n\t\t\t\tif (outgoing) {\n\t\t\t\t\t$array.each(outgoing, (outgoingLink) => {\n\t\t\t\t\t\tif (outgoingLink.get(\"target\") === targetDataItem) {\n\t\t\t\t\t\t\tvalue = outgoingLink.get(\"valueWorking\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet valueSum = this.getPrivate(\"valueSum\", 0);\n\t\t\t\t\t\tlet minSize = this.get(\"minSize\", 0);\n\t\t\t\t\t\tif(value > 0 && minSize > 0){\n\t\t\t\t\t\t\tif(value < valueSum * minSize){\n\t\t\t\t\t\t\t\tvalue = valueSum * minSize;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tgroup.push(value);\n\t\t\t})\n\t\t})\n\t\treturn matrix;\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tthis._fixRibbon(this._ribbon);\n\n\t\tlet chordChanged = false;\n\n\t\tif (this._valuesDirty || this._sizeDirty || this.isDirty(\"padAngle\") || this.isDirty(\"startAngle\")) {\n\n\t\t\tconst matrix = this._makeMatrix();\n\n\t\t\tthis._d3chord.padAngle(this.get(\"padAngle\", 0) * $math.RADIANS);\n\t\t\tconst sort = this.get(\"sort\");\n\n\t\t\tif (sort === \"ascending\") {\n\t\t\t\tthis._d3chord.sortGroups(ascending);\n\t\t\t}\n\t\t\telse if (sort === \"descending\") {\n\t\t\t\tthis._d3chord.sortGroups(descending);\n\t\t\t}\n/*\n\t\t\tthis._d3chord.sortSubgroups((a, b)=>{\n\t\t\t\tif (a != Math.round(a)) return false\n\t\t\t\tif (b != Math.round(b)) return true\n\t\t\t\treturn b < a ? -1 : b > a ? 1 : 0;\n\t\t\t})\n*/\n\t\t\tthis._chordLayout = this._d3chord(matrix);\n\n\t\t\tchordChanged = true;\n\t\t}\n\n\t\tif (chordChanged || this.isDirty(\"radius\") || this.isDirty(\"nodeWidth\")) {\n\t\t\tlet radius = $utils.relativeToValue(this.get(\"radius\", 0), Math.min(this.innerWidth(), this.innerHeight())) / 2;\n\n\t\t\tlet i = 0;\n\n\t\t\tconst chordStartAngle = this.get(\"startAngle\", 0);\n\t\t\tconst nodeWidth = this.get(\"nodeWidth\", 0);\n\n\t\t\t$array.each(this.nodes.dataItems, (dataItem) => {\n\t\t\t\tconst slice = dataItem.get(\"slice\");\n\t\t\t\tconst chordGroup = (this._chordLayout as any).groups[i];\n\t\t\t\tconst startAngle = chordGroup.startAngle * $math.DEGREES + chordStartAngle;\n\t\t\t\tconst endAngle = chordGroup.endAngle * $math.DEGREES + chordStartAngle;\n\t\t\t\tslice.setAll({ radius: radius, innerRadius: radius - nodeWidth, startAngle: startAngle as number, arc: endAngle - startAngle })\n\n\t\t\t\tconst label = dataItem.get(\"label\");\n\t\t\t\tlabel.setAll({ labelAngle: startAngle + (endAngle - startAngle) / 2 });\n\t\t\t\tlabel.setPrivate(\"radius\", radius);\n\t\t\t\tlabel.setPrivate(\"innerRadius\", 0.1);\n\t\t\t\ti++;\n\t\t\t})\n\n\t\t\tconst linkRadius = radius - this.get(\"nodeWidth\", 0);\n\n\t\t\t$array.each(this._chordLayout, (chord) => {\n\n\t\t\t\tlet dataItem = this._linksByIndex[chord.source.index + \"_\" + chord.target.index];\n\n\t\t\t\tif (!dataItem) {\n\t\t\t\t\tdataItem = this._linksByIndex[chord.target.index + \"_\" + chord.source.index];\n\t\t\t\t}\n\n\t\t\t\tif (dataItem) {\n\t\t\t\t\tconst link = dataItem.get(\"link\");\n\t\t\t\t\tthis._getLinkPoints(link, linkRadius, chord);\n\t\t\t\t\tthis._updateLink(this._ribbon, link, linkRadius, chord);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _getLinkPoints(link: ChordLink, linkRadius: number, chordLayoutItem: any) {\n\t\tconst source = chordLayoutItem.source;\n\t\tconst target = chordLayoutItem.target;\n\n\t\tconst chordStartAngle = this.get(\"startAngle\", 0) * $math.RADIANS;\n\n\t\tif (source && target) {\n\t\t\tconst startAngle0 = source.startAngle;\n\t\t\tconst endAngle0 = source.endAngle\n\t\t\tconst angle0 = startAngle0 + (endAngle0 - startAngle0) / 2 + chordStartAngle;\n\n\t\t\tconst startAngle1 = target.startAngle;\n\t\t\tconst endAngle1 = target.endAngle\n\t\t\tconst angle1 = startAngle1 + (endAngle1 - startAngle1) / 2 + chordStartAngle;\n\n\t\t\tlink._p0 = { x: linkRadius * Math.cos(angle0), y: linkRadius * Math.sin(angle0) };\n\t\t\tlink._p1 = { x: linkRadius * Math.cos(angle1), y: linkRadius * Math.sin(angle1) };\n\t\t}\n\t}\n\n\tprotected _updateLink(ribbon: RibbonGenerator<any, Ribbon, RibbonSubgroup>, link: ChordLink, linkRadius: number, chordLayoutItem: any) {\n\t\tif (chordLayoutItem) {\n\t\t\tribbon.sourceRadius($utils.relativeToValue(link.get(\"sourceRadius\", p100), linkRadius));\n\t\t\tribbon.targetRadius($utils.relativeToValue(link.get(\"targetRadius\", p100), linkRadius));\n\n\t\t\tlink.set(\"draw\", (display) => {\n\t\t\t\tribbon.context(display as any);\n\t\t\t\tribbon(chordLayoutItem);\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tlet label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tlabel.dispose();\n\t\t}\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { ChordDirected, IChordDirectedDataItem } from \"./ChordDirected\";\n\nimport { ChordLink, IChordLinkPrivate, IChordLinkSettings } from \"./ChordLink\";\n\nimport * as $utils from \"../../core/util/Utils\";\n\n\nexport interface IChordLinkDirectedSettings extends IChordLinkSettings {\n\n\t/**\n\t * Length of the link arrow in pixels.\n\t *\n\t * @default 10\n\t */\n\theadRadius?: number;\n\n}\n\nexport interface IChordLinkDirectedPrivate extends IChordLinkPrivate {\n}\n\n/**\n * A link element used in [[ChordDirected]] chart.\n */\nexport class ChordLinkDirected extends ChordLink {\n\tdeclare public _settings: IChordLinkDirectedSettings;\n\tdeclare public _privateSettings: IChordLinkDirectedPrivate;\n\n\tpublic static className: string = \"ChordLinkDirected\";\n\tpublic static classNames: Array<string> = ChordLink.classNames.concat([ChordLinkDirected.className]);\n\n\tdeclare protected _dataItem: DataItem<IChordDirectedDataItem> | undefined;\n\n\tdeclare public series: ChordDirected | undefined;\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"chord\", \"link\", \"directed\"]);\n\n\t\tsuper._afterNew();\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\n\nimport { Chord, IChordSettings, IChordDataItem, IChordPrivate, IChordEvents } from \"./Chord\";\nimport { ChordLinkDirected } from \"./ChordLinkDirected\";\nimport { chordDirected, ribbonArrow, ribbon, RibbonArrowGenerator, Ribbon, RibbonSubgroup } from \"d3-chord\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\n\nimport * as $utils from \"../../core/util/Utils\";\n\nexport interface IChordDirectedDataItem extends IChordDataItem {\n\n}\n\nexport interface IChordDirectedSettings extends IChordSettings {\n\n\t/**\n\t * Length of the link arrow in pixels.\n\t *\n\t * Set to `null` to disable arrowheads.\n\t *\n\t * @default 10\n\t */\n\tlinkHeadRadius?: number | undefined;\n\n}\n\nexport interface IChordDirectedPrivate extends IChordPrivate {\n}\n\nexport interface IChordDirectedEvents extends IChordEvents {\n}\n\n/**\n * Directed chord series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/flow-charts/} for more information\n * @important\n */\nexport class ChordDirected extends Chord {\n\n\tpublic static className: string = \"ChordDirected\";\n\tpublic static classNames: Array<string> = Chord.classNames.concat([ChordDirected.className]);\n\n\tdeclare public _settings: IChordDirectedSettings;\n\tdeclare public _privateSettings: IChordDirectedPrivate;\n\tdeclare public _dataItemSettings: IChordDirectedDataItem;\n\tdeclare public _events: IChordDirectedEvents;\n\n\tpublic _d3chord = chordDirected();\n\tpublic _ribbonArrow: RibbonArrowGenerator<any, Ribbon, RibbonSubgroup> = ribbonArrow();\n\n\t/**\n\t * List of link elements.\n\t *\n\t * @default new ListTemplate<ChordLinkDirected>\n\t */\n\tpublic readonly links: ListTemplate<ChordLinkDirected> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => ChordLinkDirected._new(this._root, { themeTags: [\"link\", \"shape\"] }, [this.links.template])\n\t);\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLink(dataItem: DataItem<this[\"_dataItemSettings\"]>): ChordLinkDirected {\n\t\tconst link = this.linksContainer.children.push(this.links.make());\n\t\tlink._setDataItem(dataItem);\n\t\tlink.set(\"source\", dataItem.get(\"source\"));\n\t\tlink.set(\"target\", dataItem.get(\"target\"));\n\n\t\tlink.series = this;\n\n\t\treturn link;\n\t}\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"directed\"]);\n\t\tsuper._afterNew();\n\t\tthis._markDirtyKey(\"linkHeadRadius\");\n\t}\n\n\tpublic _prepareChildren() {\n\t\tconst linkHeadRadius = \"linkHeadRadius\";\n\t\tif (this.isDirty(linkHeadRadius)) {\n\t\t\tconst headRadius = this.get(linkHeadRadius);\n\t\t\tif (headRadius == null) {\n\t\t\t\tthis._ribbon = ribbon();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet ribbon = ribbonArrow();\n\t\t\t\tribbon.headRadius(headRadius);\n\t\t\t\tthis._ribbon = ribbon;\n\t\t\t}\n\t\t}\n\n\t\tsuper._prepareChildren();\n\t}\n}\n","import type { ChordLink } from \"./ChordLink\";\nimport type { RibbonGenerator, RibbonSubgroup, Ribbon } from \"d3-chord\";\n\nimport { Chord, IChordSettings, IChordDataItem, IChordPrivate, IChordEvents } from \"./Chord\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $math from \"../../core/util/Math\";\nimport * as $utils from \"../../core/util/Utils\";\n\nexport interface IChordNonRibbonDataItem extends IChordDataItem {\n\n}\n\nexport interface IChordNonRibbonSettings extends IChordSettings {\n\n\t/**\n\t * Type of the link:\n\t *\n\t * `\"curve\"` (default) will display link as a curved line.\n\t * `\"line\"` will display link as a straight line.\n\t *\n\t * @default \"curve\"\n\t */\n\tlinkType?: \"curve\" | \"line\"\n\n}\n\nexport interface IChordNonRibbonPrivate extends IChordPrivate {\n}\n\nexport interface IChordNonRibbonEvents extends IChordEvents {\n}\n\n/**\n * Chord series with think line links.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/flow-charts/} for more information\n * @important\n */\nexport class ChordNonRibbon extends Chord {\n\n\tpublic static className: string = \"ChordNonRibbon\";\n\tpublic static classNames: Array<string> = Chord.classNames.concat([ChordNonRibbon.className]);\n\n\tdeclare public _settings: IChordNonRibbonSettings;\n\tdeclare public _privateSettings: IChordNonRibbonPrivate;\n\tdeclare public _dataItemSettings: IChordNonRibbonDataItem;\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"chord\", \"basic\"]);\n\n\t\tsuper._afterNew();\n\t}\n\n\tprotected _makeMatrix(): number[][] {\n\t\tconst matrix: number[][] = [];\n\t\t$array.each(this.nodes.dataItems, (sourceDataItem) => {\n\t\t\tconst group: number[] = [];\n\t\t\tmatrix.push(group);\n\n\t\t\t$array.each(this.nodes.dataItems, (targetDataItem) => {\n\t\t\t\tlet value = 1;\n\n\t\t\t\tif (sourceDataItem === targetDataItem) {\n\t\t\t\t\tvalue = 0;\n\t\t\t\t}\n\n\t\t\t\tgroup.push(value);\n\t\t\t})\n\t\t})\n\t\treturn matrix;\n\t}\n\n\tprotected _updateLink(_ribbon: RibbonGenerator<any, Ribbon, RibbonSubgroup>, link: ChordLink, _linkRadius: number, chordLayoutItem: any) {\n\t\tlink._type = this.get(\"linkType\");\n\t\tif (chordLayoutItem) {\n\t\t\tconst linkType = this.get(\"linkType\");\n\n\t\t\tlink.set(\"draw\", (display) => {\n\t\t\t\tlet p0 = link._p0;\n\t\t\t\tlet p1 = link._p1;\n\t\t\t\tif (p0 && p1) {\n\t\t\t\t\tdisplay.moveTo(p0.x, p0.y);\n\t\t\t\t\tif (linkType == \"line\") {\n\t\t\t\t\t\tdisplay.lineTo(p1.x, p1.y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdisplay.quadraticCurveTo(0, 0, p1.x, p1.y);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _getLinkPoints(link: ChordLink, linkRadius: number, _chordLayoutItem: any) {\n\t\tconst source = link.get(\"source\");\n\t\tconst target = link.get(\"target\");\n\n\t\tif (source && target) {\n\n\t\t\tconst sourceSlice = source.get(\"slice\");\n\t\t\tconst targetSlice = target.get(\"slice\");\n\n\t\t\tconst startAngle0 = sourceSlice.get(\"startAngle\", 0);\n\t\t\tconst arc0 = sourceSlice.get(\"arc\", 0)\n\t\t\tconst angle0 = startAngle0 + arc0 / 2;\n\n\t\t\tconst startAngle1 = targetSlice.get(\"startAngle\", 0);\n\t\t\tconst arc1 = targetSlice.get(\"arc\", 0)\n\t\t\tconst angle1 = startAngle1 + arc1 / 2;\n\n\t\t\tlink._p0 = { x: linkRadius * $math.cos(angle0), y: linkRadius * $math.sin(angle0) };\n\t\t\tlink._p1 = { x: linkRadius * $math.cos(angle1), y: linkRadius * $math.sin(angle1) };\n\t\t}\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { FlowNode } from \"./FlowNode\";\nimport type { Sankey } from \"./Sankey\";\nimport type { Bullet } from \"../../core/render/Bullet\";\n\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { FlowNodes, IFlowNodesSettings, IFlowNodesDataItem, IFlowNodesPrivate, IFlowNodesEvents } from \"./FlowNodes\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\n\nexport interface ISankeyNodesDataItem extends IFlowNodesDataItem {\n\trectangle: RoundedRectangle;\n}\n\nexport interface ISankeyNodesSettings extends IFlowNodesSettings {\n}\n\nexport interface ISankeyNodesPrivate extends IFlowNodesPrivate {\n}\n\nexport interface ISankeyNodesEvents extends IFlowNodesEvents {\n}\n\n/**\n * Holds instances of nodes for a [[Sankey]] series.\n */\nexport class SankeyNodes extends FlowNodes {\n\tpublic static className: string = \"SankeyNodes\";\n\tpublic static classNames: Array<string> = FlowNodes.classNames.concat([SankeyNodes.className]);\n\n\tdeclare public _settings: ISankeyNodesSettings;\n\tdeclare public _privateSettings: ISankeyNodesPrivate;\n\tdeclare public _dataItemSettings: ISankeyNodesDataItem;\n\tdeclare public _events: ISankeyNodesEvents;\n\n\t/**\n\t * List of rectangle elements.\n\t *\n\t * @default new ListTemplate<RoundedRectangle>\n\t */\n\tpublic readonly rectangles: ListTemplate<RoundedRectangle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RoundedRectangle._new(this._root, { themeTags: [\"shape\"] }, [this.rectangles.template])\n\t);\n\n\t/**\n\t * Related [[Sankey]] series.\n\t */\n\tpublic flow: Sankey | undefined;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): FlowNode {\n\t\tconst flow = this.flow;\n\n\t\tconst node = super.makeNode(dataItem, \"sankey\");\n\n\t\tconst rectangle = node.children.insertIndex(0, this.rectangles.make());\n\t\tthis.rectangles.push(rectangle);\n\t\trectangle._setSoft(\"fill\", dataItem.get(\"fill\"));\n\t\tdataItem.set(\"rectangle\", rectangle);\n\n\t\tnode.events.on(\"dragged\", () => {\n\t\t\tconst d3SankeyNode = (node.dataItem as DataItem<ISankeyNodesDataItem>).get(\"d3SankeyNode\");\n\t\t\tif (d3SankeyNode) {\n\t\t\t\tif (flow) {\n\t\t\t\t\tif (flow.get(\"orientation\") == \"horizontal\") {\n\t\t\t\t\t\td3SankeyNode.x0 = node.x();\n\t\t\t\t\t\td3SankeyNode.y0 = node.y();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\td3SankeyNode.x0 = node.y();\n\t\t\t\t\t\td3SankeyNode.y0 = node.x();\n\t\t\t\t\t}\n\n\t\t\t\t\tflow.updateSankey();\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tconst label = this.labels.make();\n\t\tthis.labels.push(label);\n\n\t\tif (flow) {\n\t\t\tlabel.addTag(flow.get(\"orientation\", \"\"));\n\t\t}\n\t\tnode.children.push(label);\n\t\tdataItem.set(\"label\", label);\n\n\t\tlabel._setDataItem(dataItem);\n\t\trectangle._setDataItem(dataItem);\n\n\t\treturn node;\n\t}\n\n\tpublic _positionBullet(bullet: Bullet) {\n\t\tconst sprite = bullet.get(\"sprite\");\n\t\tif (sprite) {\n\t\t\tconst dataItem = sprite.dataItem as DataItem<this[\"_dataItemSettings\"]>;\n\t\t\tif (dataItem) {\n\t\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\t\tif (sprite) {\n\t\t\t\t\tconst rectangle = dataItem.get(\"rectangle\");\n\t\t\t\t\tconst node = dataItem.get(\"node\");\n\t\t\t\t\tconst locationX = bullet.get(\"locationX\", 0.5);\n\t\t\t\t\tconst locationY = bullet.get(\"locationY\", 0.5);\n\t\t\t\t\tif (rectangle) {\n\t\t\t\t\t\tsprite.setAll({ x: node.x() + rectangle.width() * locationX, y: node.y() + rectangle.height() * locationY });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tlet rectangle = dataItem.get(\"rectangle\");\n\t\tif (rectangle) {\n\t\t\tthis.rectangles.removeValue(rectangle);\n\t\t\trectangle.dispose();\n\t\t}\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { FlowNode } from \"./FlowNode\";\nimport type { Sankey, ISankeyDataItem } from \"./Sankey\";\nimport type { ISankeyNodesDataItem } from \"./SankeyNodes\";\nimport type { IOrientationPoint } from \"../../core/util/IPoint\";\n\nimport { FlowLink, IFlowLinkPrivate, IFlowLinkSettings } from \"./FlowLink\";\nimport type { IPoint } from \"../../core/util/IPoint\";\nimport * as $math from \"../../core/util/Math\";\n\n\nexport interface ISankeyLinkSettings extends IFlowLinkSettings {\n\n\t/**\n\t * Source node data item.\n\t */\n\tsource?: DataItem<ISankeyNodesDataItem>;\n\n\t/**\n\t * Source node data item.\n\t */\n\ttarget?: DataItem<ISankeyNodesDataItem>;\n\n\t/**\n\t * Type of fill to use for links.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/flow-charts/sankey-diagram/#Color_mode} for more info\n\t * @default \"gradient\"\n\t */\n\tfillStyle?: \"solid\" | \"gradient\" | \"source\" | \"target\";\n\n\t/**\n\t * A relative distance from node for link \"elbow\" (bend point).\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/flow-charts/sankey-diagram/#Bend_point} for more info\n\t * @default 0.2\n\t */\n\tcontrolPointDistance?: number;\n\n}\n\nexport interface ISankeyLinkPrivate extends IFlowLinkPrivate {\n\n\t/**\n\t * Link orientation.\n\t */\n\torientation?: \"horizontal\" | \"vertical\";\n\n}\n\nexport class SankeyLink extends FlowLink {\n\tdeclare public _settings: ISankeyLinkSettings;\n\tdeclare public _privateSettings: ISankeyLinkPrivate;\n\n\tpublic static className: string = \"SankeyLink\";\n\tpublic static classNames: Array<string> = FlowLink.classNames.concat([SankeyLink.className]);\n\n\tdeclare protected _dataItem: DataItem<ISankeyDataItem> | undefined;\n\n\tdeclare public series: Sankey | undefined;\n\n\tprotected _svgPath: SVGPathElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n\tprotected _totalLength: number = 0;\n\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"source\")) {\n\t\t\tconst source = this.get(\"source\");\n\t\t\tif (source) {\n\t\t\t\tconst sourceNode = source.get(\"node\");\n\t\t\t\tthis._disposers.push(sourceNode.events.on(\"positionchanged\", () => {\n\t\t\t\t\tthis.markDirty();\n\t\t\t\t}))\n\t\t\t}\n\t\t}\n\t\tif (this.isDirty(\"target\")) {\n\t\t\tconst target = this.get(\"target\");\n\t\t\tif (target) {\n\t\t\t\tconst targetNode = target.get(\"node\");\n\t\t\t\tthis._disposers.push(targetNode.events.on(\"positionchanged\", () => {\n\t\t\t\t\tthis.markDirty();\n\t\t\t\t}))\n\t\t\t}\n\t\t}\n\n\t\tif (this.isPrivateDirty(\"orientation\")) {\n\t\t\tconst series = this.series;\n\t\t\tconst dataItem = this.dataItem as DataItem<ISankeyDataItem>;\n\t\t\tif (dataItem && series) {\n\t\t\t\tseries._updateLinkColor(dataItem);\n\t\t\t}\n\t\t}\n\n\t\tconst target = this.get(\"target\");\n\t\tconst source = this.get(\"source\");\n\n\t\tlet sourceNode: FlowNode | undefined;\n\t\tlet targetNode: FlowNode | undefined;\n\n\t\tif (source && target) {\n\t\t\tthis._clear = true;\n\t\t\tsourceNode = source.get(\"node\");\n\t\t\ttargetNode = target.get(\"node\");\n\n\t\t\tlet x0 = 0;\n\t\t\tlet x1 = 0;\n\t\t\tlet y0 = 0;\n\t\t\tlet y1 = 0;\n\n\t\t\tlet xt0 = 0;\n\t\t\tlet yt0 = 0;\n\n\t\t\tlet xt1 = 0;\n\t\t\tlet yt1 = 0;\n\n\t\t\tlet xb0 = 0;\n\t\t\tlet xb1 = 0;\n\n\t\t\tlet yb0 = 0;\n\t\t\tlet yb1 = 0;\n\n\t\t\tlet xm0 = 0;\n\t\t\tlet xm1 = 0;\n\n\t\t\tlet ym0 = 0;\n\t\t\tlet ym1 = 0;\n\n\t\t\tlet angle0 = 0;\n\t\t\tlet angle1 = 0;\n\n\n\t\t\tconst dataItem = this.dataItem as DataItem<ISankeyDataItem>;\n\t\t\tif (dataItem) {\n\t\t\t\tconst d3SankeyLink = dataItem.get(\"d3SankeyLink\");\n\t\t\t\tif (d3SankeyLink) {\n\n\t\t\t\t\tlet w = d3SankeyLink.width || 0;\n\n\t\t\t\t\tlet orientation = this.getPrivate(\"orientation\");\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tif (sourceNode) {\n\t\t\t\t\t\t\ty0 = sourceNode.y();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (targetNode) {\n\t\t\t\t\t\t\ty1 = targetNode.y();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tangle0 = 90;\n\t\t\t\t\t\tangle1 = 90;\n\n\t\t\t\t\t\tx0 = d3SankeyLink.y0 || 0;\n\t\t\t\t\t\tx1 = d3SankeyLink.y1 || 0;\n\n\t\t\t\t\t\tif (y1 < y0) {\n\t\t\t\t\t\t\t[x0, x1] = [x1, x0];\n\t\t\t\t\t\t\t[y0, y1] = [y1, y0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (source.get(\"unknown\")) {\n\t\t\t\t\t\t\tx0 = x1;\n\t\t\t\t\t\t\ty0 = y0 + (y1 - y0) / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (target.get(\"unknown\")) {\n\t\t\t\t\t\t\tx1 = x0;\n\t\t\t\t\t\t\ty1 = y0 + (y1 - y0) / 2;\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\txt0 = x0 - w / 2;\n\t\t\t\t\t\tyt0 = y0;\n\n\t\t\t\t\t\txt1 = x1 - w / 2;\n\t\t\t\t\t\tyt1 = y1;\n\n\t\t\t\t\t\txb0 = x0 + w / 2;\n\t\t\t\t\t\txb1 = x1 + w / 2;\n\n\t\t\t\t\t\tyb0 = y0;\n\t\t\t\t\t\tyb1 = y1;\n\n\t\t\t\t\t\txm0 = x0;\n\t\t\t\t\t\txm1 = x1;\n\n\t\t\t\t\t\tym0 = y0;\n\t\t\t\t\t\tym1 = y1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (sourceNode) {\n\t\t\t\t\t\t\tx0 = sourceNode.x();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (targetNode) {\n\t\t\t\t\t\t\tx1 = targetNode.x();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ty0 = d3SankeyLink.y0 || 0;\n\t\t\t\t\t\ty1 = d3SankeyLink.y1 || 0;\n\n\t\t\t\t\t\tif (x1 < x0) {\n\t\t\t\t\t\t\t[x0, x1] = [x1, x0];\n\t\t\t\t\t\t\t[y0, y1] = [y1, y0];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (source.get(\"unknown\")) {\n\t\t\t\t\t\t\ty0 = y1;\n\t\t\t\t\t\t\tx0 = x0 + (x1 - x0) / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (target.get(\"unknown\")) {\n\t\t\t\t\t\t\ty1 = y0;\n\t\t\t\t\t\t\tx1 = x0 + (x1 - x0) / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\txt0 = x0;\n\t\t\t\t\t\tyt0 = y0 - w / 2;\n\n\t\t\t\t\t\txt1 = x1;\n\t\t\t\t\t\tyt1 = y1 - w / 2;\n\n\t\t\t\t\t\txb0 = x0;\n\t\t\t\t\t\txb1 = x1;\n\n\t\t\t\t\t\tyb0 = y0 + w / 2;\n\t\t\t\t\t\tyb1 = y1 + w / 2;\n\n\t\t\t\t\t\txm0 = x0;\n\t\t\t\t\t\txm1 = x1;\n\n\t\t\t\t\t\tym0 = y0;\n\t\t\t\t\t\tym1 = y1;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($math.round(xt0, 3) == $math.round(xt1, 3)) {\n\t\t\t\t\t\txt1 += 0.01;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($math.round(yt0, 3) == $math.round(yt1, 3)) {\n\t\t\t\t\t\tyt1 += 0.01;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($math.round(xb0, 3) == $math.round(xb1, 3)) {\n\t\t\t\t\t\txb1 += 0.01;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($math.round(yb0, 3) == $math.round(yb1, 3)) {\n\t\t\t\t\t\tyb1 += 0.01;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet cpd = this.get(\"controlPointDistance\", 0.2);\n\t\t\t\t\tcpd = Math.min(0.4999, cpd);\n\n\t\t\t\t\tlet kxt0 = xt0 + (xt1 - xt0) * cpd * $math.cos(angle0);\n\t\t\t\t\tlet kyt0 = yt0 + (yt1 - yt0) * cpd * $math.sin(angle0);\n\n\t\t\t\t\tlet kxt1 = xt1 - (xt1 - xt0) * cpd * $math.cos(angle1);\n\t\t\t\t\tlet kyt1 = yt1 - (yt1 - yt0) * cpd * $math.sin(angle1);\n\n\t\t\t\t\tlet kxm0 = xm0 + (xm1 - xm0) * cpd * $math.cos(angle0);\n\t\t\t\t\tlet kym0 = ym0 + (ym1 - ym0) * cpd * $math.sin(angle0);\n\n\t\t\t\t\tlet kxm1 = xm1 - (xm1 - xm0) * cpd * $math.cos(angle1);\n\t\t\t\t\tlet kym1 = ym1 - (ym1 - ym0) * cpd * $math.sin(angle1);\n\n\t\t\t\t\tlet angle = $math.getAngle({ x: kxt0, y: kyt0 }, { x: kxt1, y: kyt1 });\n\n\t\t\t\t\tlet dx = (w / $math.cos(angle) - w) / $math.tan(angle) * $math.cos(angle0);\n\t\t\t\t\tlet dy = (w / $math.sin(angle) - w) * $math.tan(angle) * $math.sin(angle0);\n\n\t\t\t\t\tlet kxb0 = -dx / 2 + xb0 + (xb1 - xb0) * cpd * $math.cos(angle0);\n\t\t\t\t\tlet kyb0 = -dy / 2 + yb0 + (yb1 - yb0) * cpd * $math.sin(angle0);\n\n\t\t\t\t\tlet kxb1 = -dx / 2 + xb1 - (xb1 - xb0) * cpd * $math.cos(angle1);\n\t\t\t\t\tlet kyb1 = -dy / 2 + yb1 - (yb1 - yb0) * cpd * $math.sin(angle1);\n\n\t\t\t\t\tkxt0 += dx / 2;\n\t\t\t\t\tkyt0 += dy / 2;\n\n\t\t\t\t\tkxt1 += dx / 2;\n\t\t\t\t\tkyt1 += dy / 2;\n\n\t\t\t\t\tif (orientation == \"vertical\") {\n\t\t\t\t\t\tkyt0 = Math.min(yt1, Math.max(yt0 + 1, kyt0));\n\t\t\t\t\t\tkyb0 = Math.min(yb1, Math.max(yb0 + 1, kyb0));\n\n\t\t\t\t\t\tkyt1 = Math.max(yt0, Math.min(yt1 - 1, kyt1));\n\t\t\t\t\t\tkyb1 = Math.max(yb0, Math.min(yb1 - 1, kyb1));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tkxt0 = Math.min(xt1, Math.max(xt0 + 1, kxt0));\n\t\t\t\t\t\tkxb0 = Math.min(xb1, Math.max(xb0 + 1, kxb0));\n\n\t\t\t\t\t\tkxt1 = Math.max(xt0, Math.min(xt1 - 1, kxt1));\n\t\t\t\t\t\tkxb1 = Math.max(xb0, Math.min(xb1 - 1, kxb1));\n\t\t\t\t\t}\n\n\t\t\t\t\tlet segment = [[xt0, yt0, xb0, yb0], [kxt0, kyt0, kxb0, kyb0], [kxt1, kyt1, kxb1, kyb1], [xt1, yt1, xb1, yb1]];\n\n\t\t\t\t\tthis.set(\"draw\", (display) => {\n\t\t\t\t\t\tconst series = this.series!;\n\t\t\t\t\t\tseries._fillGenerator.context(display as any);\n\t\t\t\t\t\tseries._fillGenerator(segment as [number, number][]);\n\t\t\t\t\t})\n\n\t\t\t\t\tlet middleSegment = [[xm0, ym0], [kxm0, kym0], [kxm1, kym1], [xm1, ym1]];\n\n\t\t\t\t\tconst path = this.series!._strokeGenerator(middleSegment as [number, number][]);\n\n\t\t\t\t\tif (path) {\n\t\t\t\t\t\tthis._svgPath.setAttribute(\"d\", path);\n\t\t\t\t\t\tthis._totalLength = this._svgPath.getTotalLength();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.series && this.dataItem) {\n\t\t\tthis.series._positionBullets(this.dataItem as any);\n\t\t}\n\t}\n\n\tpublic getPoint(location: number): IOrientationPoint {\n\t\tif (this._svgPath) {\n\t\t\tif (this._svgPath.getAttribute(\"d\")) {\n\t\t\t\tlet p0 = this._svgPath.getPointAtLength(location * this._totalLength - 0.1);\n\t\t\t\tlet p1 = this._svgPath.getPointAtLength(location * this._totalLength + 0.1);\n\t\t\t\tlet p = this.toGlobal(this._svgPath.getPointAtLength(location * this._totalLength));\n\t\t\t\treturn { x: p.x, y: p.y, angle: $math.getAngle(p0, p1) };\n\t\t\t}\n\t\t}\n\t\treturn { x: 0, y: 0, angle: 0 }\n\t}\n\n\tpublic _getTooltipPoint(): IPoint {\n\t\treturn this.toLocal(super._getTooltipPoint());\n\t}\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import {min} from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\n\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\n\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\n\nexport function center(node) {\n  return node.targetLinks.length ? node.depth\n      : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1\n      : 0;\n}\n","export default function constant(x) {\n  return function() {\n    return x;\n  };\n}\n","import {max, min, sum} from \"d3-array\";\nimport {justify} from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  const node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths({nodes}) {\n  for (const node of nodes) {\n    let y0 = node.y0;\n    let y1 = y0;\n    for (const link of node.sourceLinks) {\n      link.y0 = y0 + link.width / 2;\n      y0 += link.width;\n    }\n    for (const link of node.targetLinks) {\n      link.y1 = y1 + link.width / 2;\n      y1 += link.width;\n    }\n  }\n}\n\nexport default function Sankey() {\n  let x0 = 0, y0 = 0, x1 = 1, y1 = 1; // extent\n  let dx = 24; // nodeWidth\n  let dy = 8, py; // nodePadding\n  let id = defaultId;\n  let align = justify;\n  let sort;\n  let linkSort;\n  let nodes = defaultNodes;\n  let links = defaultLinks;\n  let iterations = 6;\n\n  function sankey() {\n    const graph = {nodes: nodes.apply(null, arguments), links: links.apply(null, arguments)};\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function(graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function(_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function(_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function(_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function(_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function(_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function(_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function(_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function(_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function(_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks({nodes, links}) {\n    for (const [i, node] of nodes.entries()) {\n      node.index = i;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    }\n    const nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d]));\n    for (const [i, link] of links.entries()) {\n      link.index = i;\n      let {source, target} = link;\n      if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n      if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    }\n    if (linkSort != null) {\n      for (const {sourceLinks, targetLinks} of nodes) {\n        sourceLinks.sort(linkSort);\n        targetLinks.sort(linkSort);\n      }\n    }\n  }\n\n  function computeNodeValues({nodes}) {\n    for (const node of nodes) {\n      node.value = node.fixedValue === undefined\n          ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value))\n          : node.fixedValue;\n    }\n  }\n\n  function computeNodeDepths({nodes}) {\n    const n = nodes.length;\n    let current = new Set(nodes);\n    let next = new Set;\n    let x = 0;\n    while (current.size) {\n      for (const node of current) {\n        node.depth = x;\n        for (const {target} of node.sourceLinks) {\n          next.add(target);\n        }\n      }\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set;\n    }\n  }\n\n  function computeNodeHeights({nodes}) {\n    const n = nodes.length;\n    let current = new Set(nodes);\n    let next = new Set;\n    let x = 0;\n    while (current.size) {\n      for (const node of current) {\n        node.height = x;\n        for (const {source} of node.targetLinks) {\n          next.add(source);\n        }\n      }\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set;\n    }\n  }\n\n  function computeNodeLayers({nodes}) {\n    const x = max(nodes, d => d.depth) + 1;\n    const kx = (x1 - x0 - dx) / (x - 1);\n    const columns = new Array(x);\n    for (const node of nodes) {\n      const i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n      node.layer = i;\n      node.x0 = x0 + i * kx;\n      node.x1 = node.x0 + dx;\n      if (columns[i]) columns[i].push(node);\n      else columns[i] = [node];\n    }\n    if (sort) for (const column of columns) {\n      column.sort(sort);\n    }\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    const ky = min(columns, c => (y1 - y0 - (c.length - 1) * py) / sum(c, value));\n    for (const nodes of columns) {\n      let y = y0;\n      for (const node of nodes) {\n        node.y0 = y;\n        node.y1 = y + node.value * ky;\n        y = node.y1 + py;\n        for (const link of node.sourceLinks) {\n          link.width = link.value * ky;\n        }\n      }\n      y = (y1 - y + py) / (nodes.length + 1);\n      for (let i = 0; i < nodes.length; ++i) {\n        const node = nodes[i];\n        node.y0 += y * (i + 1);\n        node.y1 += y * (i + 1);\n      }\n      reorderLinks(nodes);\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    const columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, c => c.length) - 1));\n    initializeNodeBreadths(columns);\n    for (let i = 0; i < iterations; ++i) {\n      const alpha = Math.pow(0.99, i);\n      const beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  }\n\n  // Reposition each node based on its incoming (target) links.\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (let i = 1, n = columns.length; i < n; ++i) {\n      const column = columns[i];\n      for (const target of column) {\n        let y = 0;\n        let w = 0;\n        for (const {source, value} of target.targetLinks) {\n          let v = value * (target.layer - source.layer);\n          y += targetTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        let dy = (y / w - target.y0) * alpha;\n        target.y0 += dy;\n        target.y1 += dy;\n        reorderNodeLinks(target);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  // Reposition each node based on its outgoing (source) links.\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (let n = columns.length, i = n - 2; i >= 0; --i) {\n      const column = columns[i];\n      for (const source of column) {\n        let y = 0;\n        let w = 0;\n        for (const {target, value} of source.sourceLinks) {\n          let v = value * (target.layer - source.layer);\n          y += sourceTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        let dy = (y / w - source.y0) * alpha;\n        source.y0 += dy;\n        source.y1 += dy;\n        reorderNodeLinks(source);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    const i = nodes.length >> 1;\n    const subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  }\n\n  // Push any overlapping nodes down.\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      const node = nodes[i];\n      const dy = (y - node.y0) * alpha;\n      if (dy > 1e-6) node.y0 += dy, node.y1 += dy;\n      y = node.y1 + py;\n    }\n  }\n\n  // Push any overlapping nodes up.\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      const node = nodes[i];\n      const dy = (node.y1 - y) * alpha;\n      if (dy > 1e-6) node.y0 -= dy, node.y1 -= dy;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks({sourceLinks, targetLinks}) {\n    if (linkSort === undefined) {\n      for (const {source: {sourceLinks}} of targetLinks) {\n        sourceLinks.sort(ascendingTargetBreadth);\n      }\n      for (const {target: {targetLinks}} of sourceLinks) {\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      for (const {sourceLinks, targetLinks} of nodes) {\n        sourceLinks.sort(ascendingTargetBreadth);\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  // Returns the target.y0 that would produce an ideal link from source to target.\n  function targetTop(source, target) {\n    let y = source.y0 - (source.sourceLinks.length - 1) * py / 2;\n    for (const {target: node, width} of source.sourceLinks) {\n      if (node === target) break;\n      y += width + py;\n    }\n    for (const {source: node, width} of target.targetLinks) {\n      if (node === source) break;\n      y -= width;\n    }\n    return y;\n  }\n\n  // Returns the source.y0 that would produce an ideal link from source to target.\n  function sourceTop(source, target) {\n    let y = target.y0 - (target.targetLinks.length - 1) * py / 2;\n    for (const {source: node, width} of target.targetLinks) {\n      if (node === source) break;\n      y += width + py;\n    }\n    for (const {target: node, width} of source.sourceLinks) {\n      if (node === target) break;\n      y -= width;\n    }\n    return y;\n  }\n\n  return sankey;\n}\n","import type { DataItem } from \"../../core/render/Component\";\n\nimport { Flow, IFlowSettings, IFlowDataItem, IFlowPrivate, IFlowEvents } from \"./Flow\";\nimport { SankeyNodes, ISankeyNodesDataItem } from \"./SankeyNodes\";\nimport { SankeyLink } from \"./SankeyLink\";\nimport { area, line } from \"d3-shape\";\nimport { curveMonotoneXTension } from \"../../core/render/MonotoneXTension\";\nimport { curveMonotoneYTension } from \"../../core/render/MonotoneYTension\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as d3sankey from \"d3-sankey\";\n\nimport type { Bullet } from \"../../core/render/Bullet\";\n\nexport interface ISankeyDataItem extends IFlowDataItem {\n\n\t/**\n\t * Link element.\n\t */\n\tlink: SankeyLink;\n\n\t/**\n\t * Source node data item.\n\t */\n\tsource: DataItem<ISankeyNodesDataItem>;\n\n\t/**\n\t * Target node data item.\n\t */\n\ttarget: DataItem<ISankeyNodesDataItem>;\n\n}\n\nexport interface ISankeySettings extends IFlowSettings {\n\n\t/**\n\t * Orientation of the series.\n\t *\n\t * @default \"horizontal\"\n\t */\n\torientation?: \"horizontal\" | \"vertical\";\n\n\t/**\n\t * Alignment of nodes.\n\t *\n\t * @default \"left\"\n\t */\n\tnodeAlign?: \"left\" | \"right\" | \"justify\" | \"center\"\n\n\t/**\n\t * Tension setting of the link curve.\n\t *\n\t * Accepts values from `0` to `1`.\n\t *\n\t * `1` will result in perfectly straight lines.\n\t *\n\t * @default 0.5\n\t */\n\tlinkTension?: number;\n\n\t/**\n\t * A custom function to use when sorting nodes.\n\t *\n\t * @todo test\n\t * @ignore\n\t */\n\tnodeSort?: (a: d3sankey.SankeyNodeMinimal<{}, {}>, b: d3sankey.SankeyNodeMinimal<{}, {}>) => number | null;\n\n}\n\nexport interface ISankeyPrivate extends IFlowPrivate {\n}\n\nexport interface ISankeyEvents extends IFlowEvents {\n}\n\n/**\n * Sankey series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/flow-charts/} for more information\n * @important\n */\nexport class Sankey extends Flow {\n\n\tpublic static className: string = \"Sankey\";\n\tpublic static classNames: Array<string> = Flow.classNames.concat([Sankey.className]);\n\n\t/**\n\t * List of link elements.\n\t *\n\t * @default new ListTemplate<SankeyLink>\n\t */\n\tpublic readonly links: ListTemplate<SankeyLink> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => SankeyLink._new(this._root, { themeTags: [\"link\", \"shape\"] }, [this.links.template])\n\t);\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"sankey\", this._settings.orientation || \"horizontal\"]);\n\n\t\tthis._fillGenerator.y0(function(p: number[]) {\n\t\t\treturn p[3];\n\t\t});\n\n\t\tthis._fillGenerator.x0(function(p: number[]) {\n\t\t\treturn p[2];\n\t\t});\n\n\t\tthis._fillGenerator.y1(function(p: number[]) {\n\t\t\treturn p[1];\n\t\t});\n\n\t\tthis._fillGenerator.x1(function(p: number[]) {\n\t\t\treturn p[0];\n\t\t});\n\n\t\tsuper._afterNew();\n\t}\n\n\t/**\n\t * A series representing sankey nodes.\n\t *\n\t * @default SankeyNodes.new()\n\t */\n\tpublic readonly nodes: SankeyNodes = this.children.push(SankeyNodes.new(this._root, {}));\n\n\tdeclare public _settings: ISankeySettings;\n\tdeclare public _privateSettings: ISankeyPrivate;\n\tdeclare public _dataItemSettings: ISankeyDataItem;\n\tdeclare public _events: ISankeyEvents;\n\n\tpublic _d3Sankey = d3sankey.sankey();\n\tpublic _d3Graph: d3sankey.SankeyGraph<{}, {}> | undefined;\n\n\tpublic _fillGenerator = area();\n\tpublic _strokeGenerator = line();\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLink(dataItem: DataItem<this[\"_dataItemSettings\"]>): SankeyLink {\n\t\tconst source = dataItem.get(\"source\");\n\t\tconst target = dataItem.get(\"target\");\n\n\t\tconst link = this.links.make();\n\n\t\tif (source.get(\"unknown\")) {\n\t\t\tlink.addTag(\"source\");\n\t\t\tlink.addTag(\"unknown\");\n\t\t}\n\n\t\tif (target.get(\"unknown\")) {\n\t\t\tlink.addTag(\"target\");\n\t\t\tlink.addTag(\"unknown\");\n\t\t}\n\n\t\tthis.linksContainer.children.push(link);\n\t\tlink._setDataItem(dataItem);\n\t\tlink.set(\"source\", source);\n\t\tlink.set(\"target\", target);\n\t\tlink.series = this;\n\n\t\tthis.links.push(link);\n\n\t\treturn link;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateSankey() {\n\t\tconst d3Graph = this._d3Graph;\n\t\tif (d3Graph) {\n\t\t\tthis._d3Sankey.update(d3Graph);\n\n\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\tconst link = dataItem.get(\"link\");\n\t\t\t\tlink.setPrivate(\"orientation\", this.get(\"orientation\"));\n\t\t\t\tlink.markDirty();\n\t\t\t})\n\t\t}\n\t}\n\n\tpublic _updateLinkColor(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateLinkColor(dataItem);\n\t\tconst orientation = this.get(\"orientation\");\n\t\tconst fillGradient = dataItem.get(\"link\")._fillGradient;\n\t\tconst strokeGradient = dataItem.get(\"link\")._strokeGradient;\n\n\t\tif (orientation == \"vertical\") {\n\t\t\tif (fillGradient) {\n\t\t\t\tfillGradient.set(\"rotation\", 90);\n\t\t\t}\n\t\t\tif (strokeGradient) {\n\t\t\t\tstrokeGradient.set(\"rotation\", 90);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (fillGradient) {\n\t\t\t\tfillGradient.set(\"rotation\", 0);\n\t\t\t}\n\t\t\tif (strokeGradient) {\n\t\t\t\tstrokeGradient.set(\"rotation\", 0);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tprotected _getBulletLocation(bullet: Bullet): number {\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\treturn bullet.get(\"locationY\", 0);\n\t\t}\n\t\telse {\n\t\t\treturn bullet.get(\"locationX\", 0);\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\t\tlet vertical = false;\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tvertical = true;\n\t\t}\n\n\t\tif (this.isDirty(\"orientation\") || this.isDirty(\"linkTension\")) {\n\t\t\tconst linkTension = this.get(\"linkTension\", 0.5);\n\t\t\tif (vertical) {\n\t\t\t\tthis._fillGenerator.curve(curveMonotoneYTension(linkTension));\n\t\t\t\tthis._strokeGenerator.curve(curveMonotoneYTension(linkTension));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._fillGenerator.curve(curveMonotoneXTension(linkTension));\n\t\t\t\tthis._strokeGenerator.curve(curveMonotoneXTension(linkTension));\n\t\t\t}\n\t\t}\n\n\t\tif (this._valuesDirty || this._sizeDirty || this.isDirty(\"nodePadding\") || this.isDirty(\"nodeWidth\") || this.isDirty(\"nodeAlign\") || this.isDirty(\"nodeSort\") || this.isDirty(\"orientation\") || this.isDirty(\"linkTension\")) {\n\t\t\tif (this._nodesData.length > 0) {\n\t\t\t\tconst d3Sankey = this._d3Sankey;\n\t\t\t\tlet w = this.innerWidth();\n\t\t\t\tlet h = this.innerHeight();\n\n\t\t\t\tif (vertical) {\n\t\t\t\t\t[w, h] = [h, w];\n\t\t\t\t}\n\n\t\t\t\td3Sankey.size([w, h]);\n\t\t\t\td3Sankey.nodePadding(this.get(\"nodePadding\", 10));\n\t\t\t\td3Sankey.nodeWidth(this.get(\"nodeWidth\", 10));\n\t\t\t\td3Sankey.nodeSort(this.get(\"nodeSort\", null) as any);\n\n\t\t\t\tswitch (this.get(\"nodeAlign\")) {\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\td3Sankey.nodeAlign(d3sankey.sankeyRight);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"justify\":\n\t\t\t\t\t\td3Sankey.nodeAlign(d3sankey.sankeyJustify);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\td3Sankey.nodeAlign(d3sankey.sankeyCenter);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\td3Sankey.nodeAlign(d3sankey.sankeyLeft);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tthis._d3Graph = d3Sankey({ nodes: this._nodesData, links: this._linksData });\n\n\t\t\t\t$array.each(this.dataItems, (dataItem) => {\n\t\t\t\t\tconst link = dataItem.get(\"link\");\n\t\t\t\t\tlink.setPrivate(\"orientation\", this.get(\"orientation\"));\n\t\t\t\t\tlink.markDirty();\n\t\t\t\t})\n\n\t\t\t\tconst d3Graph = this._d3Graph;\n\n\t\t\t\tif (d3Graph) {\n\t\t\t\t\tconst nodes = d3Graph.nodes;\n\n\t\t\t\t\t$array.each(nodes, (d3SankeyNode) => {\n\t\t\t\t\t\tconst dataItem = (d3SankeyNode as any).dataItem as DataItem<ISankeyNodesDataItem>;\n\t\t\t\t\t\tconst node = dataItem.get(\"node\");\n\n\t\t\t\t\t\tlet x0: number | undefined;\n\t\t\t\t\t\tlet x1: number | undefined;\n\t\t\t\t\t\tlet y0: number | undefined;\n\t\t\t\t\t\tlet y1: number | undefined;\n\n\t\t\t\t\t\tif (vertical) {\n\t\t\t\t\t\t\tx0 = d3SankeyNode.y0;\n\t\t\t\t\t\t\tx1 = d3SankeyNode.y1;\n\t\t\t\t\t\t\ty0 = d3SankeyNode.x0;\n\t\t\t\t\t\t\ty1 = d3SankeyNode.x1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tx0 = d3SankeyNode.x0;\n\t\t\t\t\t\t\tx1 = d3SankeyNode.x1;\n\t\t\t\t\t\t\ty0 = d3SankeyNode.y0;\n\t\t\t\t\t\t\ty1 = d3SankeyNode.y1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ($type.isNumber(x0) && $type.isNumber(x1) && $type.isNumber(y0) && $type.isNumber(y1)) {\n\t\t\t\t\t\t\tnode.setAll({ x: x0, y: y0, width: x1 - x0, height: y1 - y0 });\n\n\t\t\t\t\t\t\tconst rectangle = dataItem.get(\"rectangle\");\n\t\t\t\t\t\t\trectangle.setAll({ width: x1 - x0, height: y1 - y0 });\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import * as m from \"./../../dist/es2015/flow.js\";\nexport const am5flow = m;"],"sourceRoot":""}